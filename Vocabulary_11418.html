<!DOCTYPE html>
<html lang="zh-Hant" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>114學年度-八年級上學期英語單字練習-翰林版 - 新生國中特教組</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #ffffff;
            --card-bg-color: #f9fafb;
            --text-color: #0c0a09;
            --text-muted-color: #57534e;
            --border-color: #e7e5e4;
            --correct-color: #15803d;
            --incorrect-color: #b91c1c;
            --highlight-color: #f59e0b;

            /* Default Unit 1 Colors */
            --accent-color: #4f46e5;
            --tab-active-bg: #4f46e5;
            --tab-active-text: #ffffff;
            --tab-inactive-bg: #e0e7ff;
            --tab-inactive-text: #3730a3;
        }

        html.dark {
            --bg-color: #1c1917;
            --card-bg-color: #292524;
            --text-color: #f5f5f4;
            --text-muted-color: #a8a29e;
            --border-color: #57534e;
            --highlight-color: #fcd34d;
            
            /* Default Unit 1 Dark Colors */
            --accent-color: #818cf8;
            --tab-active-bg: #6366f1;
            --tab-inactive-bg: #312e81;
            --tab-inactive-text: #e0e7ff;
        }
        
        /* Unit 2 Colors */
        body[data-unit="unit2"] { --accent-color: #16a34a; --tab-active-bg: #16a34a; --tab-inactive-bg: #dcfce7; --tab-inactive-text: #166534; }
        html.dark body[data-unit="unit2"] { --accent-color: #4ade80; --tab-active-bg: #22c55e; --tab-inactive-bg: #14532d; --tab-inactive-text: #dcfce7; }

        /* Unit 3 Colors */
        body[data-unit="unit3"] { --accent-color: #2563eb; --tab-active-bg: #2563eb; --tab-inactive-bg: #dbeafe; --tab-inactive-text: #1e40af; }
        html.dark body[data-unit="unit3"] { --accent-color: #60a5fa; --tab-active-bg: #3b82f6; --tab-inactive-bg: #1e3a8a; --tab-inactive-text: #dbeafe; }

        /* Unit 4 Colors */
        body[data-unit="unit4"] { --accent-color: #e11d48; --tab-active-bg: #e11d48; --tab-inactive-bg: #ffe4e6; --tab-inactive-text: #9f1239; }
        html.dark body[data-unit="unit4"] { --accent-color: #fb7185; --tab-active-bg: #f43f5e; --tab-inactive-bg: #881337; --tab-inactive-text: #ffe4e6; }

        /* Unit 5 Colors */
        body[data-unit="unit5"] { --accent-color: #d97706; --tab-active-bg: #d97706; --tab-inactive-bg: #fef3c7; --tab-inactive-text: #92400e; }
        html.dark body[data-unit="unit5"] { --accent-color: #facc15; --tab-active-bg: #f59e0b; --tab-inactive-bg: #78350f; --tab-inactive-text: #fef3c7; }
        
        /* Unit 6 Colors */
        body[data-unit="unit6"] { --accent-color: #0d9488; --tab-active-bg: #0d9488; --tab-inactive-bg: #ccfbf1; --tab-inactive-text: #115e59; }
        html.dark body[data-unit="unit6"] { --accent-color: #2dd4bf; --tab-active-bg: #14b8a6; --tab-inactive-bg: #134e4a; --tab-inactive-text: #ccfbf1; }

        /* Unit 7 Colors (Culture & Festival) */
        body[data-unit="unit7"] { --accent-color: #8b5cf6; --tab-active-bg: #8b5cf6; --tab-inactive-bg: #ede9fe; --tab-inactive-text: #6d28d9; }
        html.dark body[data-unit="unit7"] { --accent-color: #a78bfa; --tab-active-bg: #a78bfa; --tab-inactive-bg: #5b21b6; --tab-inactive-text: #ede9fe; }


        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            touch-action: pan-y;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }
        
        .card {
            background-color: var(--card-bg-color);
            transition: background-color 0.3s;
        }

        .text-muted { color: var(--text-muted-color); }
        .text-accent { color: var(--accent-color); transition: color 0.3s; }
        .border-default { border-color: var(--border-color); }
        .bg-accent { background-color: var(--accent-color); transition: background-color 0.3s;}
        .ring-accent { --tw-ring-color: var(--accent-color) }
        .speakable { cursor: pointer; }
        .speakable:hover { background-color: rgba(128, 128, 128, 0.1); border-radius: 4px;}

        #practice-input {
            background-color: transparent;
            border-bottom: 2px solid var(--border-color);
            color: var(--text-color);
            transition: border-color 0.3s, color 0.3s;
        }
        #practice-input:focus {
             border-color: var(--accent-color);
        }
        #practice-input.correct {
            border-color: var(--correct-color);
            color: var(--correct-color);
        }
        #practice-input.incorrect {
            border-color: var(--incorrect-color);
        }
        
        .modal {
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            transition: opacity 0.3s;
        }

        .syllable, .word-part {
            transition: color 0.2s ease-in-out;
        }
        .syllable-highlight, .word-part-highlight {
            color: var(--highlight-color);
        }
        .word-part-highlight {
            font-weight: 700;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1.1);
                box-shadow: 0 0 15px var(--highlight-color);
            }
            50% {
                transform: scale(1.15);
                box-shadow: 0 0 25px var(--highlight-color);
            }
        }

        .button-highlight {
            animation: pulse 1.5s infinite ease-in-out;
        }
        
        .unit-tab {
            background-color: var(--tab-inactive-bg);
            color: var(--tab-inactive-text);
            transition: background-color 0.3s, color 0.3s;
        }
        .unit-tab.active {
            background-color: var(--tab-active-bg);
            color: var(--tab-active-text);
            font-weight: 700;
        }

        .puzzle-piece {
            cursor: grab;
            user-select: none;
            touch-action: none;
        }
        .puzzle-piece:active {
            cursor: grabbing;
        }
        .puzzle-slot {
            min-width: 80px;
            height: 50px;
        }

    </style>
</head>
<body data-unit="unit1">

    <!-- Login Modal -->
    <div id="login-modal" class="modal fixed inset-0 z-50 flex items-center justify-center">
        <div class="card w-full max-w-sm p-8 rounded-2xl shadow-2xl">
            <h2 class="text-2xl font-bold text-center mb-6">登入以記錄學習排行</h2>
            <form id="login-form">
                <input type="text" id="user-id" placeholder="輸入您的 Email 或 LINE ID" class="w-full px-4 py-3 rounded-lg border-default focus:outline-none focus:ring-2 ring-accent" style="background-color: var(--bg-color); color: var(--text-color);" required>
                <button type="submit" class="w-full mt-6 bg-accent text-white font-bold py-3 px-6 rounded-lg hover:opacity-90 transition">開始學習</button>
            </form>
        </div>
    </div>
    
    <!-- Leaderboard Modal -->
    <div id="leaderboard-modal" class="modal fixed inset-0 z-40 items-center justify-center hidden">
        <div class="card w-full max-w-md p-8 rounded-2xl shadow-2xl relative">
            <button id="close-leaderboard-btn" class="absolute top-4 right-4 text-muted hover:text-red-500">
                 <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
            <h2 class="text-2xl font-bold text-center mb-6 text-accent">學習排行榜</h2>
            <div id="leaderboard-content" class="space-y-3 max-h-96 overflow-y-auto">
                <!-- Leaderboard entries go here -->
            </div>
        </div>
    </div>


    <div class="w-full max-w-2xl mx-auto p-4 md:p-6 flex flex-col min-h-screen">
        <!-- Header -->
        <header class="flex items-center justify-between mb-4">
             <div>
                <h1 class="text-3xl font-bold">英語單字練習</h1>
                <h2 id="unit-title" class="text-xl font-semibold text-muted">Unit 1</h2>
            </div>
             <div class="flex items-center gap-2">
                <button id="leaderboard-btn" class="p-2 rounded-full text-muted hover:bg-gray-200 dark:hover:bg-gray-700 transition" title="排行榜">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm3.3 14.71L12 16l-3.3 1.71c-.4.2-1.03-.18-.94-.65l.63-3.68-2.67-2.61c-.33-.32-.15-.89.3-.95l3.69-.54L12 6.34c.19-.38.78-.38.97 0l1.65 3.35 3.69.54c.45.07.63.63.3.95l-2.67 2.61.63 3.68c.09.47-.54.85-.94.65z"/></svg>
                </button>
                <button id="theme-toggle" class="p-2 rounded-full text-muted hover:bg-gray-200 dark:hover:bg-gray-700 transition" title="切換日夜模式">
                    <svg id="theme-icon-dark" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>
                    <svg id="theme-icon-light" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
                </button>
            </div>
        </header>

        <!-- Unit Tabs -->
        <nav id="unit-tabs" class="flex flex-wrap gap-2 mb-6">
            <!-- Tabs will be generated by JS -->
        </nav>

        <!-- Main Content Area -->
        <main class="flex-grow flex flex-col justify-center">
            <!-- Flashcard View -->
            <div id="flashcard-view">
                <div id="slideshow-container" class="card rounded-2xl shadow-lg overflow-hidden relative" style="min-height: 520px;">
                    <div id="slide-content" class="p-6 md:p-10 flex flex-col justify-between h-full">
                        <!-- Dynamic content goes here -->
                    </div>
                </div>
                 <!-- Flashcard Navigation -->
                <nav class="flex items-center justify-between mt-6">
                    <button id="prev-btn" class="card font-bold py-3 px-6 rounded-full shadow-md transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
                    </button>
                    <div id="slide-counter" class="text-lg font-medium text-muted"></div>
                    <button id="next-btn" class="card font-bold py-3 px-6 rounded-full shadow-md transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                    </button>
                </nav>
            </div>

            <!-- Puzzle View -->
            <div id="puzzle-view" class="hidden">
                 <div class="card rounded-2xl shadow-lg p-6 md:p-10" style="min-height: 520px;">
                    <h3 class="text-2xl font-bold text-accent mb-4 text-center">單字拼圖練習</h3>
                    <div id="puzzle-question-counter" class="text-center text-muted mb-6"></div>
                    <div id="puzzle-question" class="text-center text-2xl font-bold mb-8"></div>
                    <div id="puzzle-slots" class="flex justify-center items-center gap-2 flex-wrap mb-8 bg-gray-200 dark:bg-gray-800 p-4 rounded-lg"></div>
                    <div id="puzzle-pieces" class="flex justify-center items-center gap-2 flex-wrap"></div>
                    <div id="puzzle-feedback" class="text-center font-bold mt-6 h-6"></div>
                 </div>
                 <div class="flex justify-center mt-6">
                     <button id="back-to-flashcards-btn" class="bg-gray-500 text-white font-bold py-3 px-8 rounded-full shadow-md transition hover:opacity-90 mr-4">返回單字卡</button>
                    <button id="next-puzzle-btn" class="bg-accent text-white font-bold py-3 px-8 rounded-full shadow-md transition hover:opacity-90 hidden">下一題</button>
                 </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="text-center mt-8 py-4 border-t border-default">
            <div id="usage-stats" class="text-muted text-sm mb-2"></div>
            <p class="text-muted text-sm">作者: 新生國中特教組</p>
        </footer>
    </div>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
        import { getFirestore, doc, setDoc, getDoc, collection, query, getDocs, serverTimestamp, increment, orderBy, limit } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let app, auth, db;
        if (Object.keys(firebaseConfig).length > 0) {
             try {
                app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                db = getFirestore(app);
            } catch (e) {
                console.error("Firebase initialization failed:", e);
            }
        } else {
            console.warn("Firebase config is missing. Leaderboard and scoring will be disabled.");
        }

        const allUnitsData = {
            'unit1': [
                { word: 'summer vacation', syllables: ['sum','mer', 'va','ca','tion'], phonetics: '͵sʌmɚ veˋkeʃən', partOfSpeech: 'n.', definition: '暑假', examples: [{en: 'I went to Australia during summer vacation in August.', zh: '我暑假八月時去了澳洲。'}] },
                { word: 'weather', syllables: ['wea','ther'], phonetics: 'ˋwɛðɚ', partOfSpeech: 'n.', definition: '天氣', examples: [{en: 'The weather in Africa is usually hot.', zh: '非洲的天氣通常很熱。'}, {en: 'We didn’t climb the mountain because of the bad weather.', zh: '因為天氣不好，我們沒有去爬山。'}] },
                { word: 'Taiwan', syllables: ['Tai','wan'], phonetics: 'ˋtaɪˋwɑn', partOfSpeech: 'n.', definition: '臺灣', examples: [{en: 'Taiwan is an island with a lot of yummy food.', zh: '臺灣是座有許多美食的島嶼。'}, {en: 'It is hot in July in Taiwan.', zh: '臺灣七月很炎熱。'}] },
                { word: 'fun', syllables: ['fun'], phonetics: 'fʌn', partOfSpeech: 'n.; adj.', definition: '樂趣；有趣的', examples: [{en: 'Was it fun at the park last Sunday?', zh: '你上星期天在公園好玩嗎？'}, {en: 'We had a lot of fun at the party.', zh: '我們在派對玩得很開心。'}] },
                { word: 'snow', syllables: ['snow'], phonetics: 'sno', partOfSpeech: 'v.; n.', definition: '下雪；雪', examples: [{en: 'Does it snow in Taiwan?', zh: '臺灣會下雪嗎？'}, {en: 'Yes, but it only snows in the mountains.', zh: '會，但只有山裡會下雪。'}] },
                { word: 'send', syllables: ['send'], phonetics: 'sɛnd', partOfSpeech: 'v.', definition: '寄；送', examples: [{en: 'Did you send your mom a Christmas card?', zh: '你有寄給你媽媽一張聖誕卡片嗎？'}, {en: 'We sent her some flowers.', zh: '我們寄給她一些花。'}] },
                { word: 'postcard', syllables: ['post','card'], phonetics: 'ˋpost͵kɑrd', partOfSpeech: 'n.', definition: '明信片', examples: [{en: 'I sent my brother a postcard from Poland.', zh: '我從波蘭寄了一張明信片給我的弟弟。'}, {en: 'I got a postcard from Willy.', zh: '我收到威利的明信片。'}] },
                { word: 'borrow', syllables: ['bor','row'], phonetics: 'ˋbɑro', partOfSpeech: 'v.', definition: '借(入)', examples: [{en: 'Sabrina is borrowing an umbrella from her friend.', zh: '莎賓娜正在向她的朋友借傘。'}, {en: 'Tom borrowed $1,000 from me last week.', zh: '上週湯姆跟我借了一千元。'}] },
                { word: 'lend', syllables: ['lend'], phonetics: 'lɛnd', partOfSpeech: 'v.', definition: '借(出)', examples: [{en: 'Can you lend these new books to me?', zh: '你可以借我這些新書嗎？'}] },
                { word: 'glove', syllables: ['glove'], phonetics: 'glʌv', partOfSpeech: 'n.', definition: '手套', examples: [{en: 'My father bought me new gloves for winter.', zh: '我爸爸買了手套給我過冬。'}] },
                { word: 'kind', syllables: ['kind'], phonetics: 'kaɪnd', partOfSpeech: 'adj.', definition: '親切的', examples: [{en: 'Michelle is a kind teacher. Her students like her very much.', zh: '蜜雪兒是位親切的老師。她的學生都很喜歡她。'}, {en: 'Jack is kind to everyone.', zh: '傑克對每個人都很親切。'}] },
                { word: 'lovely', syllables: ['love','ly'], phonetics: 'ˋlʌvlɪ', partOfSpeech: 'adj.', definition: '可愛的；美好的', examples: [{en: 'Mark is a lovely person, so he has many friends.', zh: '馬克是個可愛的人，所以他朋友很多。'}, {en: 'The dolls are so lovely. Can I buy one?', zh: '這些洋娃娃真可愛。我可以買一個嗎？'}] },
                { word: 'jacket', syllables: ['jack','et'], phonetics: 'ˋdʒækɪt', partOfSpeech: 'n.', definition: '夾克', examples: [{en: 'Tyler, can I borrow your jacket, please? I am cold.', zh: '泰勒，我可以跟你借夾克嗎，拜託？我好冷。'}] },
                { word: 'give', syllables: ['give'], phonetics: 'gɪv', partOfSpeech: 'v.', definition: '給予', examples: [{en: 'Can you give me a glass of water, please?', zh: '可以請你給我一杯水嗎？'}, {en: 'She gave me a box of chocolate.', zh: '她給了我一盒巧克力。'}] },
                { word: 'hate', syllables: ['hate'], phonetics: 'het', partOfSpeech: 'v.', definition: '討厭', examples: [{en: 'I hate milk; I never drink it.', zh: '我討厭牛奶；我從來不喝。'}, {en: 'I really hate rainy days.', zh: '我真的很討厭雨天。'}] },
                { word: 'heavy', syllables: ['hea','vy'], phonetics: 'ˋhɛvɪ', partOfSpeech: 'adj.', definition: '厚重的；大量的', examples: [{en: 'We had heavy snow last week.', zh: '上星期有下大雪。'}, {en: 'Elephants are heavy.', zh: '大象很重。'}] },
                { word: 'season', syllables: ['sea','son'], phonetics: 'ˋsizn̩', partOfSpeech: 'n.', definition: '季節', examples: [{en: 'Many people visit the island during the holiday season.', zh: '許多人會在假日季節造訪這座島嶼。'}] },
                { word: 'spring', syllables: ['spring'], phonetics: 'sprɪŋ', partOfSpeech: 'n.', definition: '春天', examples: [{en: 'I like spring because the weather is warm.', zh: '我喜歡春天，因為天氣很溫暖。'}] },
                { word: 'cloud', syllables: ['cloud'], phonetics: 'klaʊd', partOfSpeech: 'n.', definition: '雲', examples: [{en: 'It’s a beautiful day. There’s not a cloud in the sky.', zh: '今天天氣很好。天空中一朵雲都沒有。'}] },
                { word: 'sun', syllables: ['sun'], phonetics: 'sʌn', partOfSpeech: 'n.', definition: '太陽', examples: [{en: 'Don’t sit in the sun; it’s too hot.', zh: '別坐在太陽下；太熱了。'}] },
                { word: 'autumn', syllables: ['au','tumn'], phonetics: 'ˋɔtəm', partOfSpeech: 'n.', definition: '秋天', examples: [{en: 'Autumn is the season between summer and winter.', zh: '秋天是在夏天與冬天之間的季節。'}, {en: 'The Moon Festival is in fall.', zh: '中秋節在秋天。'}] },
                { word: 'wind', syllables: ['wind'], phonetics: 'wɪnd', partOfSpeech: 'n.', definition: '風', examples: [{en: 'The winds are so strong today.', zh: '今天的風很大。'}] },
                { word: 'winter', syllables: ['win','ter'], phonetics: 'ˋwɪntɚ', partOfSpeech: 'n.', definition: '冬天', examples: [{en: 'Mom doesn’t like winter because the weather is too cold for her.', zh: '媽媽不喜歡冬天，因為天氣對她來說太冷了。'}] },
                { word: 'sunny', syllables: ['sun','ny'], phonetics: 'ˋsʌnɪ', partOfSpeech: 'adj.', definition: '陽光普照的', examples: [{en: 'It’s sunny today. Let’s take a walk in the park.', zh: '今天陽光普照。我們去公園散步吧。'}] },
                { word: 'snowy', syllables: ['snowy'], phonetics: 'ˋsnoɪ', partOfSpeech: 'adj.', definition: '有雪的', examples: [{en: 'We had a snowy winter last year.', zh: '去年我們有個多雪的冬天。'}] },
                { word: 'rainy', syllables: ['rainy'], phonetics: 'ˋrenɪ', partOfSpeech: 'adj.', definition: '有雨的', examples: [{en: 'Oh no! It’s rainy today.', zh: '喔不！今天下雨。'}] },
                { word: 'cloudy', syllables: ['cloudy'], phonetics: 'ˋklaʊdɪ', partOfSpeech: 'adj.', definition: '多雲的', examples: [{en: 'Is it warm and sunny in Taipei now? No. It’s cloudy.', zh: '現在臺北是溫暖晴朗的嗎？不是。現在是陰天。'}] },
                { word: 'windy', syllables: ['windy'], phonetics: 'ˋwɪndɪ', partOfSpeech: 'adj.', definition: '風大的', examples: [{en: 'It’s very windy. Please go inside the house.', zh: '風很大。請進去屋內。'}] },
                { word: 'cool', syllables: ['cool'], phonetics: 'kul', partOfSpeech: 'adj.', definition: '涼爽的', examples: [{en: 'I took my dog to the beach on a cool evening.', zh: '我在一個涼爽的傍晚帶著我的小狗到海邊。'}, {en: 'Where did you get this cool watch?', zh: '你從哪裡得到這支這麼酷的手錶?'}] },
                { word: 'speak', syllables: ['speak'], phonetics: 'spik', partOfSpeech: 'v.', definition: '講話', examples: [{en: 'Many people in Taiwan can speak English.', zh: '在臺灣，很多人會說英語。'}] },
                { word: 'mad', syllables: ['mad'], phonetics: 'mæd', partOfSpeech: 'adj.', definition: '生氣的', examples: [{en: 'I was late for school again today, so my teacher was mad.', zh: '我今天上學又遲到了，所以我的老師很生氣。'}] },
                { word: 'in fact', syllables: ['in', 'fact'], phonetics: 'ɪn ˋfækt', partOfSpeech: '', definition: '事實上', examples: [{en: 'In fact, she’s sad these days because her cat died last week.', zh: '事實上，她這幾天很傷心，因為她的貓上星期死掉了。'}] },
                { word: 'mean', syllables: ['mean'], phonetics: 'min', partOfSpeech: 'v.', definition: '意指', examples: [{en: 'What does the sign mean?', zh: '這個標誌是什麼意思？'}, {en: 'It means "We can\'t swim here."', zh: '它是指「我們不能在這裡游泳」。'}] },
                { word: 'another', syllables: ['an','oth','er'], phonetics: 'əˋnʌðɚ', partOfSpeech: 'adj.; pron.', definition: '另一(的)', examples: [{en: 'Can I have another cup of green tea?', zh: '我可以再來一杯綠茶嗎？'}] },
                { word: 'order', syllables: ['or','der'], phonetics: 'ˋɔrdɚ', partOfSpeech: 'v.; n.', definition: '點餐；訂購', examples: [{en: 'Tim ordered a pizza and a milkshake.', zh: '提姆點了一個披薩跟一杯奶昔。'}] },
                { word: 'strange', syllables: ['strange'], phonetics: 'strendʒ', partOfSpeech: 'adj.', definition: '奇怪的；陌生的', examples: [{en: 'There’s a strange man at the door.', zh: '門口有位陌生的男子。'}] },
                { word: 'soon', syllables: ['soon'], phonetics: 'sun', partOfSpeech: 'adv.', definition: '很快地', examples: [{en: 'Good-bye, everybody. See you soon.', zh: '大家再見。很快會再見面。'}] },
                { word: 'Rd.', syllables: ['Rd.'], phonetics: 'rod', partOfSpeech: 'n.', definition: '路', examples: [{en: 'On a postcard, “Rd." stands for "Road."', zh: '在明信片上，「 Rd.」代表「路」。'}] },
                { word: 'ROC', syllables: ['ROC'], phonetics: '͵ɑr ͵o ˋsi', partOfSpeech: 'n.', definition: '中華民國', examples: [{en: 'ROC is another name for Taiwan.', zh: '中華民國是臺灣的另一個名稱。'}] },
            ],
            'unit2': [
                { word: 'club', syllables: ['club'], phonetics: 'klʌb', partOfSpeech: 'n.', definition: '社團', examples: [{en: 'I can practice English with my friends at the English club.', zh: '我可以在英文社跟朋友們練習英文。'}] },
                { word: 'make up one\'s mind', syllables: ['make', 'up', 'one\'s', 'mind'], phonetics: '͵mek ʌp wʌnz ˋmaɪnd', partOfSpeech: '', definition: '下定決心', examples: [{en: 'I can’t make up my mind.', zh: '我無法決定。'}] },
                { word: 'interesting', syllables: ['in','ter','est','ing'], phonetics: 'ˋɪnt(ə)rɪstɪŋ', partOfSpeech: 'adj.', definition: '有趣的', examples: [{en: 'Our English class is always fun and interesting.', zh: '我們的英文課總是好玩又有趣。'}] },
                { word: 'science', syllables: ['sci','ence'], phonetics: 'ˋsaɪəns', partOfSpeech: 'n.', definition: '科學', examples: [{en: 'My father is a science teacher at a junior high school.', zh: '我爸爸是國中自然科學老師。'}] },
                { word: 'subject', syllables: ['sub','ject'], phonetics: 'ˋsʌbdʒɪkt', partOfSpeech: 'n.', definition: '學科；主題', examples: [{en: 'What’s your favorite subject?', zh: '你最喜歡的科目是什麼？'}, {en: 'The subject of the book is art.', zh: '這本書的主題是藝術。'}] },
                { word: 'hear', syllables: ['hear'], phonetics: 'hɪr', partOfSpeech: 'v.', definition: '聽見', examples: [{en: 'I heard many stories about the Taj Mahal when I was in India.', zh: '我在印度時，聽到了許多關於泰姬瑪哈陵的故事。'}] },
                { word: 'same', syllables: ['same'], phonetics: 'sem', partOfSpeech: 'adj.', definition: '相同的', examples: [{en: 'My cousin and I go to the same school, and we have the same math teacher.', zh: '我的表弟跟我去同所學校，我們的數學老師也是同一位。'}] },
                { word: 'call', syllables: ['call'], phonetics: 'kɔl', partOfSpeech: 'v.; n.', definition: '打電話；呼叫', examples: [{en: 'Sorry. My dad is not at home. Please call back later.', zh: '抱歉。我爸不在家。請待會再打來。'}] },
                { word: 'tell', syllables: ['tell'], phonetics: 'tel', partOfSpeech: 'v.', definition: '告訴', examples: [{en: 'Rebecca told me an interesting story today.', zh: '瑞貝卡今天告訴我一則有趣的故事。'}] },
                { word: 'pull one\'s leg', syllables: ['pull', 'one\'s', 'leg'], phonetics: '͵ pʊl wʌnz ˋlɛg', partOfSpeech: '', definition: '開玩笑', examples: [{en: 'Are you pulling my leg?', zh: '你在開玩笑吧？'}] },
                { word: 'poor', syllables: ['poor'], phonetics: 'pʊr', partOfSpeech: 'adj.', definition: '不佳的；貧窮的', examples: [{en: 'Jason’s English is poor. He needs practice.', zh: '傑森英文不好。他需要練習。'}, {en: 'There are many poor people in Africa.', zh: '非洲有很多貧困的人。'}] },
                { word: 'end', syllables: ['end'], phonetics: 'ɛnd', partOfSpeech: 'n.; v.', definition: '結尾；結束', examples: [{en: 'The K-pop concert ended at 9 p.m.', zh: '這場韓國流行音樂會晚上九點結束。'}] },
                { word: 'whose', syllables: ['whose'], phonetics: 'huz', partOfSpeech: 'adj.; pron.', definition: '誰的', examples: [{en: 'Whose birthday cake is that?', zh: '那是誰的生日蛋糕？'}] },
                { word: 'camera', syllables: ['cam','er','a'], phonetics: 'ˋkæmərə', partOfSpeech: 'n.', definition: '相機', examples: [{en: 'I can take a picture of you with my camera.', zh: '我可以用我的相機幫你拍照。'}] },
                { word: 'mine', syllables: ['mine'], phonetics: 'maɪn', partOfSpeech: 'pron.', definition: '我的(東西)', examples: [{en: 'Kevin, is that book yours? Yes, it’s mine.', zh: '凱文，那本書是你的嗎？對，是我的。'}] },
                { word: 'What\'s up?', syllables: ['What\'s', 'up?'], phonetics: '͵(h)wɑts `ʌp', partOfSpeech: '', definition: '怎麼了？', examples: [{en: 'What’s up?', zh: '怎麼了？'}] },
                { word: 'when', syllables: ['when'], phonetics: '(h)wɛn', partOfSpeech: 'conj.', definition: '當...', examples: [{en: 'I gave John the gift when I saw him at the party yesterday.', zh: '我昨天在派對上看到約翰時，給了他禮物。'}] },
                { word: 'back', syllables: ['back'], phonetics: 'bæk', partOfSpeech: 'adv.', definition: '返回', examples: [{en: 'My grandparents come back to Taiwan from the USA every year.', zh: '我祖父母每年會從美國回來臺灣。'}] },
                { word: 'sign up', syllables: ['sign', 'up'], phonetics: '͵saɪn ˋʌp', partOfSpeech: '', definition: '報名參加', examples: [{en: 'Cathy signed up for the computer club.', zh: '凱西報名參加了電腦社。'}] },
                { word: 'wrong', syllables: ['wrong'], phonetics: 'rɔŋ', partOfSpeech: 'adj.', definition: '錯誤的', examples: [{en: 'My sister took the wrong umbrella this morning.', zh: '我妹妹今天早上拿錯傘。'}] },
                { word: 'hold on', syllables: ['hold', 'on'], phonetics: '͵hold ˋɑn', partOfSpeech: '', definition: '稍候', examples: [{en: 'Hold on, please.', zh: '請稍等。'}] },
                { word: 'math', syllables: ['math'], phonetics: 'mæθ', partOfSpeech: 'n.', definition: '數學', examples: [{en: 'Ken doesn’t like math because he hates numbers.', zh: '肯不喜歡數學，因為他討厭數字。'}] },
                { word: 'soccer', syllables: ['soc','cer'], phonetics: 'ˋsɑkɚ', partOfSpeech: 'n.', definition: '足球', examples: [{en: 'Which do you like, soccer or baseball?', zh: '你喜歡哪一個，足球還是棒球？'}] },
                { word: 'Chinese', syllables: ['Chi','nese'], phonetics: 'tʃaɪˋniz', partOfSpeech: 'adj.; n.', definition: '中國的；中文', examples: [{en: 'We always have a big dinner on Chinese New Year’s Eve.', zh: '我們在除夕總是會吃一頓豐盛的晚餐。'}] },
                { word: 'history', syllables: ['his','to','ry'], phonetics: 'ˋhɪst(ə)rɪ', partOfSpeech: 'n.', definition: '歷史', examples: [{en: 'India has a long and interesting history.', zh: '印度有個悠久又有趣的歷史。'}] },
                { word: 'violin', syllables: ['vi','o','lin'], phonetics: '͵vaɪəˋlɪn', partOfSpeech: 'n.', definition: '小提琴', examples: [{en: 'Can you play the violin?', zh: '你會拉小提琴嗎？'}] },
                { word: 'robot', syllables: ['ro','bot'], phonetics: 'ˋrobət', partOfSpeech: 'n.', definition: '機器人', examples: [{en: 'Willy has a robot dog; he plays with it every day.', zh: '威利有隻機器狗；他每天都跟它玩。'}] },
                { word: 'health', syllables: ['health'], phonetics: 'hɛlθ', partOfSpeech: 'n.', definition: '健康', examples: [{en: 'Apples are good for your health.', zh: '蘋果有益你的健康。'}] },
                { word: 'PE', syllables: ['PE'], phonetics: 'ˋpi ˋi', partOfSpeech: 'n.', definition: '體育', examples: [{en: 'Leo likes PE class because he is good at sports.', zh: '里歐喜歡體育課，因為他很擅長運動。'}] },
                { word: 'look for', syllables: ['look', 'for'], phonetics: 'ˋlʊk fɚ', partOfSpeech: '', definition: '尋找', examples: [{en: 'What are you looking for?', zh: '你在找什麼？'}] },
                { word: 'Ms.', syllables: ['Ms.'], phonetics: 'mɪz', partOfSpeech: 'n.', definition: '女士', examples: [{en: 'Ms. Yang is a kind person. She sends food to the poor.', zh: '楊女士是位親切的人。她會送食物給貧困的人。'}] },
                { word: 'engineer', syllables: ['en','gi','neer'], phonetics: '͵ɛndʒəˋnɪr', partOfSpeech: 'n.', definition: '工程師', examples: [{en: 'My brother is an engineer at a computer company.', zh: '我哥哥是一間電腦公司的工程師。'}] },
                { word: 'lesson', syllables: ['les','son'], phonetics: 'ˋlɛsn̩', partOfSpeech: 'n.', definition: '課；課程', examples: [{en: 'I have an English lesson every Monday and Thursday.', zh: '我每週一和週四有英文課。'}] },
                { word: 'difficult', syllables: ['dif','fi','cult'], phonetics: 'ˋdɪfə͵kəlt', partOfSpeech: 'adj.', definition: '困難的', examples: [{en: 'I cannot do my math homework; it is too difficult for me.', zh: '我沒辦法做我的數學作業；它對我而言太難了。'}] },
                { word: 'teach', syllables: ['teach'], phonetics: 'titʃ', partOfSpeech: 'v.', definition: '教導', examples: [{en: 'Mr. Bill is a teacher. He teaches science at my school.', zh: '比爾先生是位老師。他在我的學校教自然科學。'}] },
                { word: 'own', syllables: ['own'], phonetics: 'on', partOfSpeech: 'adj.; v.', definition: '自己的；擁有', examples: [{en: 'Joe owns a really nice car.', zh: '喬擁有一輛很棒的汽車。'}, {en: 'Jamie wants her own room.', zh: '潔米想要自己的房間。'}] },
                { word: 'finish', syllables: ['fin','ish'], phonetics: 'ˋfɪnɪʃ', partOfSpeech: 'v.', definition: '完成；結束', examples: [{en: 'What time does the basketball game finish?', zh: '籃球比賽何時結束？'}] },
                { word: 'festival', syllables: ['fes','ti','val'], phonetics: 'ˋfɛstəv!', partOfSpeech: 'n.', definition: '節慶', examples: [{en: 'There is a K-pop festival in spring.', zh: '春季有場韓國流行音樂節。'}] },
                { word: 'start', syllables: ['start'], phonetics: 'stɑrt', partOfSpeech: 'v.; n.', definition: '開始', examples: [{en: 'Our summer vacation starts in late June.', zh: '我們的暑假在六月下旬開始。'}] },
                { word: 'choice', syllables: ['choice'], phonetics: 'tʃɔɪs', partOfSpeech: 'n.', definition: '選擇', examples: [{en: 'Which color is your choice for the car?', zh: '你選哪種顏色作為汽車的顏色？'}] },
                { word: 'not... at all', syllables: ['not...', 'at', 'all'], phonetics: '͵nɑt ət ˋɔl', partOfSpeech: '', definition: '一點也不', examples: [{en: 'That movie was not interesting at all. Don’t go see it.', zh: '那部電影一點都不有趣。不要去看。'}] },
                { word: 'free', syllables: ['free'], phonetics: 'fri', partOfSpeech: 'adj.', definition: '免費的', examples: [{en: 'I bought a computer, and the man gave me a free computer case.', zh: '我買了一臺電腦，然後那位男士給我一個免費的電腦外殼。'}, {en: 'Are you free for the meet-and-greet on Sunday?', zh: '你有空參加禮拜天的見面會嗎?'}] },
                { word: 'show', syllables: ['show'], phonetics: 'ʃo', partOfSpeech: 'n.', definition: '表演；節目', examples: [{en: 'My brother watches game shows in his free time.', zh: '我哥哥閒暇時會觀看遊戲節目。'}] },
                { word: 'miss out', syllables: ['miss', 'out'], phonetics: '͵mɪs aʊˋt', partOfSpeech: '', definition: '錯過機會', examples: [{en: 'Join our club. Don’t miss out on the fun!', zh: '加入我們的社團。別錯過這份樂趣！'}] },
            ],
            'unit3': [
                { word: 'someone', syllables: ['some','one'], phonetics: 'ˋsʌm͵wʌn', partOfSpeech: 'pron.', definition: '某人', examples: [{en: 'Did you hear that? Someone was calling your name.', zh: '你有聽到嗎？有人在叫你的名字。'}] },
                { word: 'break', syllables: ['break'], phonetics: 'brek', partOfSpeech: 'v.', definition: '打破；損壞', examples: [{en: 'She broke the cookie into halves.', zh: '她把餅乾掰成兩半。'}] },
                { word: 'do the dishes', syllables: ['do', 'the', 'dishes'], phonetics: '͵du ðə ˋdɪʃɪz', partOfSpeech: '', definition: '洗碗盤', examples: [{en: 'I was doing the dishes when you called.', zh: '你打電話來時，我正在洗碗盤。'}] },
                { word: 'half', syllables: ['half'], phonetics: 'hæf', partOfSpeech: 'n.', definition: '一半', examples: [{en: 'Patty wasn’t hungry; she only ate half of her rice.', zh: '派蒂不餓；她只吃了一半的飯。'}] },
                { word: 'past', syllables: ['past'], phonetics: 'pæst', partOfSpeech: 'prep.', definition: '經過', examples: [{en: 'It’s five past twelve. It’s time for lunch.', zh: '十二點五分。午餐時間到了。'}, {en: 'The past year was difficult for Tom.', zh: '過去一年對湯姆來說很艱難。'}] },
                { word: 'leave', syllables: ['leave'], phonetics: 'liv', partOfSpeech: 'v.', definition: '離開', examples: [{en: 'The train leaves at six o’clock every morning.', zh: '火車每天早上六點發車。'}] },
                { word: 'quarter', syllables: ['quar','ter'], phonetics: 'ˋkwɔrtɚ', partOfSpeech: 'n.', definition: '十五分鐘；四分之一', examples: [{en: 'We were studying at the library at a quarter past ten.', zh: '十點十五分時，我們正在圖書館讀書。'}] },
                { word: 'remember', syllables: ['re','mem','ber'], phonetics: 'rɪˋmɛmbɚ', partOfSpeech: 'v.', definition: '記得', examples: [{en: 'I can’t remember.', zh: '我不記得了。'}] },
                { word: 'take it easy', syllables: ['take', 'it', 'ea','sy'], phonetics: '͵tek ɪt ˋizɪ', partOfSpeech: '', definition: '放輕鬆', examples: [{en: 'Take it easy. I can help you.', zh: '放輕鬆。我可以幫你。'}] },
                { word: 'cool down', syllables: ['cool', 'down'], phonetics: '͵kul ˋdaʊn', partOfSpeech: '', definition: '冷靜一下', examples: [{en: 'Cool down. Here, you can use mine.', zh: '冷靜點。來，你可以用我的。'}] },
                { word: 'close', syllables: ['close'], phonetics: 'klos', partOfSpeech: 'adj.', definition: '靠近的', examples: [{en: 'The park is close. We can walk there.', zh: '那公園在附近。我們可以走過去。'}, {en: 'Close the door when you leave.', zh: '你離開的時候關上門。'}] },
                { word: 'feed', syllables: ['feed'], phonetics: 'fid', partOfSpeech: 'v.', definition: '餵養', examples: [{en: 'When I am not at home, my sister walks and feeds our dog.', zh: '我不在家時，我妹妹會遛我們的狗並餵食牠。'}] },
                { word: 'pet', syllables: ['pet'], phonetics: 'pɛt', partOfSpeech: 'n.', definition: '寵物', examples: [{en: 'Do you have a pet?', zh: '你有寵物嗎？'}] },
                { word: 'sweep', syllables: ['sweep'], phonetics: 'swip', partOfSpeech: 'v.', definition: '掃', examples: [{en: 'The students sweep the floor after class.', zh: '學生們在課後掃地。'}] },
                { word: 'floor', syllables: ['floor'], phonetics: 'flɔr', partOfSpeech: 'n.', definition: '地板；樓層', examples: [{en: 'Let’s clean the floor.', zh: '我們來清理地板吧。'}] },
                { word: 'fix', syllables: ['fix'], phonetics: 'fɪks', partOfSpeech: 'v.', definition: '修理；解決', examples: [{en: 'Can you fix my computer?', zh: '你能修理我的電腦嗎？'}] },
                { word: 'drawer', syllables: ['draw','er'], phonetics: 'ˋdrɔɚ', partOfSpeech: 'n.', definition: '抽屜', examples: [{en: 'There are some pencils and markers in the drawer.', zh: '抽屜裡有一些鉛筆跟麥克筆。'}] },
                { word: 'mop', syllables: ['mop'], phonetics: 'mɑp', partOfSpeech: 'v.; n.', definition: '拖地；拖把', examples: [{en: 'She is mopping the floor.', zh: '她正在拖地。'}] },
                { word: 'stairs', syllables: ['stairs'], phonetics: 'stɛrz', partOfSpeech: 'n.', definition: '樓梯', examples: [{en: 'There is a small bathroom just by the stairs.', zh: '樓梯旁就有間小的洗手間。'}] },
                { word: 'wipe', syllables: ['wipe'], phonetics: 'waɪp', partOfSpeech: 'v.', definition: '擦拭', examples: [{en: 'I wiped the dining table after dinner.', zh: '我在晚餐後擦拭餐桌。'}] },
                { word: 'window', syllables: ['win','dow'], phonetics: 'ˋwɪndo', partOfSpeech: 'n.', definition: '窗戶', examples: [{en: 'It is hot here. Please open the windows.', zh: '這裡好熱。請打開窗戶。'}] },
                { word: 'dry', syllables: ['dry'], phonetics: 'draɪ', partOfSpeech: 'v.; adj.', definition: '（使）乾燥；乾的', examples: [{en: 'I’m drying my hair.', zh: '我正在弄乾頭髮。'}] },
                { word: 'hang', syllables: ['hang'], phonetics: 'hæŋ', partOfSpeech: 'v.', definition: '吊；掛', examples: [{en: 'Let’s not hang our umbrellas on the chairs.', zh: '我們別把雨傘掛在椅子上。'}] },
                { word: 'clothes', syllables: ['clothes'], phonetics: 'kloz', partOfSpeech: 'n.', definition: '衣服', examples: [{en: 'We always buy new clothes for Chinese New Year.', zh: '我們總會為了春節買新衣服。'}] },
                { word: 'move', syllables: ['move'], phonetics: 'muv', partOfSpeech: 'v.; n.', definition: '搬遷；移動', examples: [{en: 'My family and I moved to a new place when I was in elementary school.', zh: '我和家人在我唸小學時搬到了一個新地方。'}] },
                { word: 'city', syllables: ['ci','ty'], phonetics: 'ˋsɪtɪ', partOfSpeech: 'n.', definition: '城市', examples: [{en: 'Life in a big city is very busy.', zh: '大城市的生活非常忙碌。'}] },
                { word: 'dream', syllables: ['dream'], phonetics: 'drim', partOfSpeech: 'n.; v.; adj.', definition: '夢；夢想(的)', examples: [{en: 'I had a dream before I woke up.', zh: '我醒來前做了一個夢。'}] },
                { word: 'almost', syllables: ['al','most'], phonetics: 'ˋɔl͵most', partOfSpeech: 'adv.', definition: '幾乎', examples: [{en: 'Sara goes to the library almost every day.', zh: '莎拉幾乎每天都去圖書館。'}] },
                { word: 'fall asleep', syllables: ['fall', 'a','sleep'], phonetics: '͵fɔl əˋslip', partOfSpeech: '', definition: '睡著', examples: [{en: 'Yuki didn’t sleep last night, so she fell asleep in class.', zh: '由紀昨晚沒睡覺，所以她在課堂上睡著了。'}] },
                { word: 'scared', syllables: ['scared'], phonetics: 'skɛrd', partOfSpeech: 'adj.', definition: '害怕的', examples: [{en: 'My sister is scared of dogs.', zh: '我妹怕狗。'}] },
                { word: 'problem', syllables: ['prob','lem'], phonetics: 'ˋprɑbləm', partOfSpeech: 'n.', definition: '問題', examples: [{en: 'Can we go to the coffee shop later? No problem!', zh: '我們晚點可以去咖啡廳嗎？沒問題！'}] },
                { word: 'tip', syllables: ['tip'], phonetics: 'tɪp', partOfSpeech: 'n.', definition: '訣竅', examples: [{en: 'I gave her some cooking tips.', zh: '我給了她一些烹飪的訣竅。'}] },
                { word: 'however', syllables: ['how','ev','er'], phonetics: 'haʊˋɛvɚ', partOfSpeech: 'adv.', definition: '然而', examples: [{en: 'You can borrow my guitar. However, please be careful with it.', zh: '你可以借我的吉他。不過，請小心對待它。'}] },
                { word: 'nothing', syllables: ['noth','ing'], phonetics: 'ˋnʌθɪŋ', partOfSpeech: 'pron.', definition: '沒什麼', examples: [{en: 'There’s nothing in the box. I took everything out.', zh: '這箱子裡什麼都沒有。我把所有東西都拿出來了。'}] },
                { word: 'catch', syllables: ['catch'], phonetics: 'kætʃ', partOfSpeech: 'v.', definition: '捉；接', examples: [{en: 'The cat ran after the rat and then caught it.', zh: '那隻貓追逐那隻老鼠，然後捉住牠。'}] },
                { word: 'through', syllables: ['through'], phonetics: 'θru', partOfSpeech: 'prep.', definition: '穿越', examples: [{en: 'The river goes through the forest.', zh: '這條河穿越這片森林。'}] },
                { word: 'finally', syllables: ['fi','nal','ly'], phonetics: 'ˋfaɪn!ɪ', partOfSpeech: 'adv.', definition: '終於', examples: [{en: 'I finally visited my grandparents in the USA last summer.', zh: '去年夏天我終於拜訪了在美國的爺爺奶奶。'}] },
                { word: 'save', syllables: ['save'], phonetics: 'sev', partOfSpeech: 'v.', definition: '拯救', examples: [{en: 'Let’s save the animals in the rainforest.', zh: '我們來拯救這座雨林的動物吧。'}] },
                { word: 'terrible', syllables: ['ter','ri','ble'], phonetics: 'ˋtɛrəb!', partOfSpeech: 'adj.', definition: '糟糕的', examples: [{en: 'It’s a terrible movie. I don’t like it.', zh: '這部電影很糟。我不喜歡。'}] },
            ],
            'unit4': [
                { word: 'hope', syllables: ['hope'], phonetics: 'hop', partOfSpeech: 'v.; n.', definition: '希望', examples: [{en: 'I hope to be with him.', zh: '我希望能去陪著他。'}] },
                { word: 'future', syllables: ['fu','ture'], phonetics: 'ˋfjutʃɚ', partOfSpeech: 'n.; adj.', definition: '未來(的)', examples: [{en: 'Annie wants to be a doctor in the future.', zh: '安妮未來想當一位醫生。'}] },
                { word: 'plan', syllables: ['plan'], phonetics: 'plæn', partOfSpeech: 'v.; n.', definition: '規劃；計畫', examples: [{en: 'What do you plan to do during winter vacation?', zh: '你規劃在寒假期間做什麼？'}] },
                { word: 'lawyer', syllables: ['law','yer'], phonetics: 'ˋlɔjɚ', partOfSpeech: 'n.', definition: '律師', examples: [{en: 'Henry is studying to be a lawyer.', zh: '亨利讀書是為了當律師。'}] },
                { word: 'job', syllables: ['job'], phonetics: 'dʒɑb', partOfSpeech: 'n.', definition: '工作', examples: [{en: 'Jason has a job at the coffee shop.', zh: '傑森在這間咖啡店工作。'}] },
                { word: 'get butterflies in one\'s stomach', syllables: ['get', 'but','ter','flies', 'in', 'one\'s', 'stom','ach'], phonetics: 'gɛt ˋbʌtɚ͵flaɪz ɪn wʌnz ͵stʌmək', partOfSpeech: '', definition: '感到緊張', examples: [{en: 'I get butterflies in my stomach.', zh: '我會感到緊張。'}] },
                { word: 'worry', syllables: ['wor','ry'], phonetics: 'ˋwɝɪ', partOfSpeech: 'v.; n.', definition: '擔心', examples: [{en: 'Don’t worry. I can help you.', zh: '別擔心。我可以幫你。'}] },
                { word: 'keep', syllables: ['keep'], phonetics: 'kip', partOfSpeech: 'v.', definition: '持續；保持', examples: [{en: 'Tom, don’t keep playing computer games. Go study now.', zh: '湯姆，別一直打電動。現在去讀書。'}] },
                { word: 'idea', syllables: ['i','de','a'], phonetics: 'aɪˋdiə', partOfSpeech: 'n.', definition: '主意；想法', examples: [{en: 'Going to the beach on a rainy day is a bad idea.', zh: '在雨天去海邊是個壞主意。'}] },
                { word: 'right', syllables: ['right'], phonetics: 'raɪt', partOfSpeech: 'n.', definition: '權利', examples: [{en: 'You have the right to get a lawyer.', zh: '你有聘請律師的權利。'}, {en: 'My house is right next to a park.', zh: '我的房子就在公園旁邊。'}, {en: 'That\'s right.', zh: '沒錯。'}] },
                { word: 'put on', syllables: ['put', 'on'], phonetics: '͵pʊt ˋɑn', partOfSpeech: '', definition: '穿上', examples: [{en: 'I am putting on my jacket.', zh: '我正在穿夾克。'}] },
                { word: 'reporter', syllables: ['re','port','er'], phonetics: 'rɪˋpɔrtɚ', partOfSpeech: 'n.', definition: '記者', examples: [{en: 'There are many reporters at the man’s house.', zh: '有很多記者在那個男人的房子前面。'}] },
                { word: 'interview', syllables: ['in','ter','view'], phonetics: 'ˋɪntɚ͵vju', partOfSpeech: 'v.; n.', definition: '採訪；面試', examples: [{en: 'The reporter is interviewing the K-pop boy band.', zh: '記者正在訪問這個韓國流行樂男團。'}, {en: 'Mary had a job interview this week.', zh: '瑪莉特本週有一場工作面試。'}] },
                { word: 'mail carrier', syllables: ['mail', 'car','rier'], phonetics: 'ˋmel ͵kærɪɚ', partOfSpeech: 'n.', definition: '郵差', examples: [{en: 'Mail carriers do not deliver mail on weekends.', zh: '郵差週末不送信。'}] },
                { word: 'dentist', syllables: ['den','tist'], phonetics: 'ˋdɛntɪst', partOfSpeech: 'n.', definition: '牙醫', examples: [{en: 'You need to go to the dentist then.', zh: '那麼你需要去看牙醫。'}] },
                { word: 'factory', syllables: ['fac','to','ry'], phonetics: 'ˋfækt(ə)rɪ', partOfSpeech: 'n.', definition: '工廠', examples: [{en: 'Mary just got a job in a car factory.', zh: '瑪莉剛得到一份在汽車工廠的工作。'}] },
                { word: 'fisherman', syllables: ['fish','er','man'], phonetics: 'ˋfɪʃɚmən', partOfSpeech: 'n.', definition: '漁夫', examples: [{en: 'Rick’s uncle is a fisherman. He needs to get up early to catch fish.', zh: '瑞克的叔叔是位漁夫。他需要早起去捕魚。'}] },
                { word: 'secretary', syllables: ['sec','re','tar','y'], phonetics: 'ˋsɛkrə͵tɛrɪ', partOfSpeech: 'n.', definition: '祕書', examples: [{en: 'The secretary made an important call for the boss this morning.', zh: '這位祕書今早替老闆打了一通重要的電話。'}] },
                { word: 'boss', syllables: ['boss'], phonetics: 'bɔs', partOfSpeech: 'n.', definition: '老闆', examples: [{en: 'The boss of that company gave me a job.', zh: '那間公司的老闆給了我一份工作。'}] },
                { word: 'salesman', syllables: ['sales','man'], phonetics: 'ˋselzmən', partOfSpeech: 'n.', definition: '銷售員', examples: [{en: 'Sam is a salesman at that computer shop.', zh: '山姆是那間電腦商店的銷售人員。'}] },
                { word: 'farmer', syllables: ['farm','er'], phonetics: 'ˋfɑrmɚ', partOfSpeech: 'n.', definition: '農夫', examples: [{en: 'Lisa was a teacher before she became a farmer.', zh: '麗莎在成為農夫前是位老師。'}] },
                { word: 'grow', syllables: ['grow'], phonetics: 'gro', partOfSpeech: 'v.', definition: '種植；成長', examples: [{en: 'Uncle Ted grows apples and oranges on his farm.', zh: '泰德叔叔在他的農場上種植蘋果跟柳橙。'}] },
                { word: 'soldier', syllables: ['sol','dier'], phonetics: 'ˋsoldʒɚ', partOfSpeech: 'n.', definition: '士兵', examples: [{en: 'Mrs. Miller’s son is a soldier, not a police officer.', zh: '米勒太太的兒子是軍人，不是警察。'}] },
                { word: 'country', syllables: ['coun','try'], phonetics: 'ˋkʌntrɪ', partOfSpeech: 'n.', definition: '國家', examples: [{en: 'Which country is Sharon from, Australia or the USA?', zh: '雪倫來自哪個國家，澳洲還是美國？'}] },
                { word: 'truck driver', syllables: ['truck', 'driv','er'], phonetics: 'ˋtrʌk ͵draɪvɚ', partOfSpeech: 'n.', definition: '卡車司機', examples: [{en: 'Truck drivers often need to work long hours.', zh: '卡車司機常常需要長時間工作。'}] },
                { word: 'drive', syllables: ['drive'], phonetics: 'draɪv', partOfSpeech: 'v.', definition: '開(車)', examples: [{en: 'Can you drive me to the library?', zh: '你可以開車載我去圖書館嗎？'}] },
                { word: 'successful', syllables: ['suc','cess','ful'], phonetics: 'səkˋsɛsfəl', partOfSpeech: 'adj.', definition: '成功的', examples: [{en: 'The meet-and-greet was successful. The singer and her fans were very happy.', zh: '那場見面會很成功。那名歌手跟她的粉絲都很開心。'}] },
                { word: 'find', syllables: ['find'], phonetics: 'faɪnd', partOfSpeech: 'v.', definition: '找到；發現', examples: [{en: 'Did you find your history book?', zh: '你有找到你的歷史書嗎？'}] },
                { word: 'grade', syllables: ['grade'], phonetics: 'gred', partOfSpeech: 'n.', definition: '年級', examples: [{en: 'Kyle has a brother in the ninth grade.', zh: '凱爾有個就讀九年級的哥哥。'}] },
                { word: 'decide', syllables: ['de','cide'], phonetics: 'dɪˋsaɪd', partOfSpeech: 'v.', definition: '決定', examples: [{en: 'Ann and I decided to join the science club.', zh: '安跟我決定加入科學社。'}] },
                { word: 'become', syllables: ['be','come'], phonetics: 'bɪˋkʌm', partOfSpeech: 'v.', definition: '成為', examples: [{en: 'I want to become a successful salesman like my father.', zh: '我想成為跟我爸爸一樣成功的銷售員。'}] },
                { word: 'relative', syllables: ['rel','a','tive'], phonetics: 'ˋrɛlətɪv', partOfSpeech: 'n.', definition: '親戚', examples: [{en: 'All my relatives get together during the Christmas holidays.', zh: '我全部的親戚都會在聖誕節團聚。'}] },
                { word: 'believe', syllables: ['be','lieve'], phonetics: 'bɪˋliv', partOfSpeech: 'v.', definition: '相信', examples: [{en: 'I don’t believe you. Maybe you were dreaming.', zh: '我不相信你。你大概是在做夢。'}] },
                { word: 'act', syllables: ['act'], phonetics: 'ækt', partOfSpeech: 'v.', definition: '表演', examples: [{en: 'She enjoys singing and acting.', zh: '她很喜歡唱歌和演戲。'}] },
                { word: 'all over', syllables: ['all', 'o','ver'], phonetics: 'ˋɔl ˋovɚ', partOfSpeech: '', definition: '遍及', examples: [{en: 'The band is famous all over the country.', zh: '這個樂團紅遍了整個國家。'}] },
                { word: 'make fun of', syllables: ['make', 'fun', 'of'], phonetics: '͵mek ˋfʌn əv', partOfSpeech: '', definition: '取笑', examples: [{en: 'Ben’s classmates always make fun of him because he is fat.', zh: '班的同學總是嘲笑他，因為他很胖。'}] },
                { word: 'give up', syllables: ['give', 'up'], phonetics: '͵gɪv ˋʌp', partOfSpeech: '', definition: '放棄', examples: [{en: 'Don’t give up on your dreams.', zh: '別放棄你的夢想。'}] },
            ],
            'unit5': [
                { word: 'metro', syllables: ['me','tro'], phonetics: 'ˋmɛtro', partOfSpeech: 'n.', definition: '捷運', examples: [{en: 'You can go there by bus or metro.', zh: '你可以搭公車或地鐵到那裡。'}] },
                { word: 'lost', syllables: ['lost'], phonetics: 'lɔst', partOfSpeech: 'adj.', definition: '迷路的', examples: [{en: 'I got lost on the way to the train station.', zh: '我在去火車站的路上迷路了。'}] },
                { word: 'map', syllables: ['map'], phonetics: 'mæp', partOfSpeech: 'n.', definition: '地圖', examples: [{en: 'We are lost. We need a map now.', zh: '我們迷路了。我們現在需要一張地圖。'}] },
                { word: 'ask', syllables: ['ask'], phonetics: 'æsk', partOfSpeech: 'v.', definition: '請求；詢問', examples: [{en: 'You can ask your friends to help you.', zh: '你可以請求你的朋友們幫你。'}, {en: 'Zac asked his teacher some questions.', zh: '柴克問了他的老師一些問題。'}] },
                { word: 'Excuse me.', syllables: ['Ex','cuse', 'me.'], phonetics: 'ɪkˋskjuz ͵mi', partOfSpeech: '', definition: '請問...', examples: [{en: 'Excuse me. Where is the bathroom?', zh: '不好意思。請問洗手間在哪裡？'}] },
                { word: 'straight', syllables: ['straight'], phonetics: 'stret', partOfSpeech: 'adv.; adj.', definition: '直地；直的', examples: [{en: 'Turn right at the hospital and keep going straight.', zh: '在醫院右轉，然後一直直走。'}] },
                { word: 'turn left', syllables: ['turn', 'left'], phonetics: '͵tɝn ˋlɛft', partOfSpeech: '', definition: '向左轉', examples: [{en: 'Turn left on First Street, and the shop is on the corner.', zh: '在第一街左轉，商店就在轉角。'}] },
                { word: 'along', syllables: ['a','long'], phonetics: 'əˋlɔŋ', partOfSpeech: 'prep.', definition: '沿著', examples: [{en: 'There are many flowers along the river.', zh: '河流沿岸有很多花。'}] },
                { word: 'block', syllables: ['block'], phonetics: 'blɑk', partOfSpeech: 'n.', definition: '街區', examples: [{en: 'My good friend and I live on the same block.', zh: '我的好友跟我住在同一個街區。'}] },
                { word: 'corner', syllables: ['cor','ner'], phonetics: 'ˋkɔrnɚ', partOfSpeech: 'n.', definition: '轉角；角落', examples: [{en: 'Jackie’s house is on the corner of Apple Street and Cherry Road.', zh: '傑克的家在蘋果街跟櫻桃路的轉角。'}] },
                { word: 'across from', syllables: ['a','cross', 'from'], phonetics: 'əˋkrɔs frəm', partOfSpeech: '', definition: '在...對面', examples: [{en: 'Stacy is sitting across from Justin and Alex.', zh: '史黛西坐在賈斯汀跟艾力克斯的對面。'}] },
                { word: 'supermarket', syllables: ['su','per','mar','ket'], phonetics: 'ˋsupɚ͵mɑrkɪt', partOfSpeech: 'n.', definition: '超市', examples: [{en: 'Gina goes to the supermarket every Saturday.', zh: '吉娜每個星期六都去超市。'}] },
                { word: 'ground', syllables: ['ground'], phonetics: 'graʊnd', partOfSpeech: 'n.', definition: '地面', examples: [{en: 'Be careful! There is a bug on the ground.', zh: '小心！地上有隻蟲。'}] },
                { word: 'sir', syllables: ['sir'], phonetics: 'sɝ', partOfSpeech: 'n.', definition: '先生', examples: [{en: 'Good morning, sir. May I help you?', zh: '先生，早安。我可以為您服務嗎？'}] },
                { word: 'on foot', syllables: ['on', 'foot'], phonetics: 'ɑn ˋfʊt', partOfSpeech: '', definition: '步行', examples: [{en: 'The flower shop is close. Let’s go there on foot.', zh: '花店很近。我們用走的去。'}] },
                { word: 'take', syllables: ['take'], phonetics: 'tek', partOfSpeech: 'v.', definition: '搭乘', examples: [{en: 'We can take a taxi or a bus, but not the metro.', zh: '我們可以搭計程車或公車，但不能搭地鐵。'}] },
                { word: 'by', syllables: ['by'], phonetics: 'baɪ', partOfSpeech: 'prep.', definition: '搭乘', examples: [{en: 'Let’s go to Indonesia by ship.', zh: '我們搭船去印尼吧。'}, {en: 'I\'m reading some books by Charles Dickens.', zh: '我正在閱讀查爾斯·狄更斯寫的一些書。'}, {en: 'There is a brown horse by the big tree.', zh: '那棵大樹旁有一匹棕色的馬。'}] },
                { word: 'get off', syllables: ['get', 'off'], phonetics: '͵gɛt ˋɔf', partOfSpeech: '', definition: '下車', examples: [{en: 'We need to get off the bus at Berkeley Library.', zh: '我們需要在柏克萊圖書館下公車。'}] },
                { word: 'get', syllables: ['get'], phonetics: 'gɛt', partOfSpeech: 'v.', definition: '到達', examples: [{en: 'How can we get to the museum?', zh: '我們要如何到博物館？'}, {en: 'We can get some food over there.', zh: '我們可以在那裡獲得一些食物。'}] },
                { word: 'right', syllables: ['right'], phonetics: 'raɪt', partOfSpeech: 'n.; adj.; adv.', definition: '右邊(的)', examples: [{en: 'In the picture, the girl on my right is my sister.', zh: '照片裡，在我右邊的是我妹妹。'}, {en: 'You have the right to get a lawyer.', zh: '你有聘請律師的權利。'}] },
                { word: 'ship', syllables: ['ship'], phonetics: 'ʃɪp', partOfSpeech: 'n.', definition: '輪船', examples: [{en: 'They took a ship to the USA and took a plane home.', zh: '他們搭船到美國，再搭飛機回家。'}] },
                { word: 'taxi', syllables: ['tax','i'], phonetics: 'ˋtæksɪ', partOfSpeech: 'n.', definition: '計程車', examples: [{en: 'Can we take a taxi home?', zh: '我們可以搭計程車回家嗎？'}] },
                { word: 'bike', syllables: ['bike'], phonetics: 'baɪk', partOfSpeech: 'n.', definition: '單車', examples: [{en: 'Mary often goes to school by bike.', zh: '瑪莉時常騎腳踏車上學。'}] },
                { word: 'motorcycle', syllables: ['mo','tor','cy','cle'], phonetics: 'ˋmotɚ͵saɪk!', partOfSpeech: 'n.', definition: '機車', examples: [{en: 'He is only 17 years old. He can’t ride a motorcycle.', zh: '他只有十七歲。他不能騎摩托車。'}] },
                { word: 'scooter', syllables: ['scoot','er'], phonetics: 'ˋskutɚ', partOfSpeech: 'n.', definition: '機車', examples: [{en: 'Is a motorcycle different from a scooter?', zh: '摩托車跟機車不一樣嗎？'}] },
                { word: 'bank', syllables: ['bank'], phonetics: 'bæŋk', partOfSpeech: 'n.', definition: '銀行；河岸', examples: [{en: 'Claire plans to go to the bank later.', zh: '克萊兒計劃待會去銀行。'}, {en: 'There is a dog walking along the bank.', zh: '有一隻狗沿著河堤走著。'}] },
                { word: 'fire station', syllables: ['fire', 'sta','tion'], phonetics: '`faɪr ͵steʃən', partOfSpeech: 'n.', definition: '消防局', examples: [{en: 'Martin works at the fire station.', zh: '馬丁在消防局工作。'}] },
                { word: 'toy', syllables: ['toy'], phonetics: 'tɔɪ', partOfSpeech: 'n.', definition: '玩具', examples: [{en: 'My little brother got some toy cars for his birthday this year.', zh: '我的小弟今年生日得到了一些玩具車。'}] },
                { word: 'post office', syllables: ['post', 'of','fice'], phonetics: 'ˋpost ͵ɔfɪs', partOfSpeech: 'n.', definition: '郵局', examples: [{en: 'The post office is to the left of the library.', zh: '郵局在圖書館的左側。'}] },
                { word: 'hospital', syllables: ['hos','pi','tal'], phonetics: 'ˋhɑspɪt!', partOfSpeech: 'n.', definition: '醫院', examples: [{en: 'Lily is a nurse; she works at a hospital.', zh: '莉莉是位護理師；她在一間醫院工作。'}] },
                { word: 'pool', syllables: ['pool'], phonetics: 'pul', partOfSpeech: 'n.', definition: '水池', examples: [{en: 'The weather is hot, so we want to go to the pool today.', zh: '天氣很熱，所以我們今天想去游泳池。'}] },
                { word: 'go jogging', syllables: ['go', 'jog','ging'], phonetics: 'go ˋdʒɑgɪŋ', partOfSpeech: '', definition: '慢跑', examples: [{en: 'He goes jogging in the morning before he goes to work.', zh: '他早上上班前會去慢跑。'}] },
                { word: 'go sailing', syllables: ['go', 'sail','ing'], phonetics: 'go ˋselɪŋ', partOfSpeech: '', definition: '玩帆船', examples: [{en: 'Let’s go sailing in August during summer vacation.', zh: '我們八月暑假時去玩帆船吧。'}] },
                { word: 'go surfing', syllables: ['go', 'surf','ing'], phonetics: 'go ˋsɝfɪŋ', partOfSpeech: '', definition: '衝浪', examples: [{en: 'Did you often go surfing with your friend?', zh: '你之前常跟朋友衝浪嗎？'}] },
                { word: 'fly', syllables: ['fly'], phonetics: 'flaɪ', partOfSpeech: 'v.', definition: '飛行；駕駛', examples: [{en: 'My uncle can fly a plane.', zh: '我舅舅會開飛機。'}] },
                { word: 'bus stop', syllables: ['bus', 'stop'], phonetics: 'ˋbʌs ͵stɑp', partOfSpeech: 'n.', definition: '公車站', examples: [{en: 'Let’s wait for Alice at the bus stop.', zh: '我們在公車站等艾莉絲吧。'}] },
                { word: 'go biking', syllables: ['go', 'bik','ing'], phonetics: 'go ˋbaɪkɪŋ', partOfSpeech: '', definition: '騎單車', examples: [{en: 'Many people like to go biking at the park.', zh: '許多人喜歡在公園騎腳踏車。'}] },
                { word: 'go shopping', syllables: ['go', 'shop','ping'], phonetics: 'go ˋʃɑpɪŋ', partOfSpeech: '', definition: '購物', examples: [{en: 'They want to go shopping for clothes this afternoon.', zh: '他們今天下午想去採買衣服。'}] },
                { word: 'hit', syllables: ['hit'], phonetics: 'hɪt', partOfSpeech: 'v.; n.', definition: '碰撞；打擊', examples: [{en: 'The man was using his phone when his car hit the tree.', zh: '那個男子的車撞到樹的時候，他正在用手機。'}] },
                { word: 'sound', syllables: ['sound'], phonetics: 'saʊnd', partOfSpeech: 'n.', definition: '聲音', examples: [{en: 'Hey, listen! What’s that strange sound?', zh: '嘿，你聽！那奇怪的聲音是什麼？'}] },
                { word: 'bell', syllables: ['bell'], phonetics: 'bɛl', partOfSpeech: 'n.', definition: '鐘；鈴', examples: [{en: 'Do you have a bell on your bicycle?', zh: '你的腳踏車有裝車鈴嗎？'}] },
                { word: 'experience', syllables: ['ex','pe','ri','ence'], phonetics: 'ɪkˋspɪrɪəns', partOfSpeech: 'n.; v.', definition: '經歷；經驗', examples: [{en: 'People learn from their past experience.', zh: '人們從過去經驗學習。'}] },
                { word: 'wonderful', syllables: ['won','der','ful'], phonetics: 'ˋwʌndɚfəl', partOfSpeech: 'adj.', definition: '美好的', examples: [{en: 'I had a wonderful time at the party yesterday.', zh: '我昨天在派對上度過了美好的時光。'}] },
                { word: 'play', syllables: ['play'], phonetics: 'ple', partOfSpeech: 'n.', definition: '戲劇', examples: [{en: 'How many plays did William Shakespeare write?', zh: '威廉‧莎士比亞寫了幾齣戲劇？'}, {en: 'The video game is fun to play.', zh: '這款電動玩起來很有趣。'}] },
                { word: 'around', syllables: ['a','round'], phonetics: 'əˋraʊnd', partOfSpeech: 'adv.', definition: '大約', examples: [{en: 'Brandon got home around 9:30 last night.', zh: '布蘭登昨晚大約九點半到家。'}, {en: 'Are there many houses around the park?', zh: '公園周遭有很多房子嗎?'}] },
            ],
            'unit6': [
                { word: 'will', syllables: ['will'], phonetics: 'wɪl', partOfSpeech: 'aux.', definition: '將', examples: [{en: 'I will be late for class today.', zh: '我今天上課會遲到。'}] },
                { word: 'ugly', syllables: ['ug','ly'], phonetics: 'ˋʌglɪ', partOfSpeech: 'adj.', definition: '醜的', examples: [{en: 'This pair of shoes is ugly.', zh: '這雙鞋很醜。'}] },
                { word: 'sweater', syllables: ['sweat','er'], phonetics: 'ˋswɛtɚ', partOfSpeech: 'n.', definition: '毛衣', examples: [{en: 'My favorite sweater is the pink one.', zh: '我最喜歡的毛衣是粉紅色的那件。'}] },
                { word: 'tonight', syllables: ['to','night'], phonetics: 'təˋnaɪt', partOfSpeech: 'adv.; n.', definition: '今晚', examples: [{en: 'Let’s go to the baseball game tonight.', zh: '今晚我們一起去看棒球比賽吧。'}] },
                { word: 'funny', syllables: ['fun','ny'], phonetics: 'ˋfʌnɪ', partOfSpeech: 'adj.', definition: '滑稽的', examples: [{en: 'Ted made a funny face.', zh: '泰德做了個鬼臉。'}] },
                { word: 'cost', syllables: ['cost'], phonetics: 'kɔst', partOfSpeech: 'v.; n.', definition: '價錢為；花費', examples: [{en: 'The belt cost me 500 NT dollars.', zh: '這條腰帶花了我新臺幣五百元。'}] },
                { word: 'price', syllables: ['price'], phonetics: 'praɪs', partOfSpeech: 'n.', definition: '價格', examples: [{en: 'What is the price of the popcorn?', zh: '爆米花售價多少？'}] },
                { word: 'spend', syllables: ['spend'], phonetics: 'spɛnd', partOfSpeech: 'v.', definition: '花費', examples: [{en: 'I spend a lot of time at home.', zh: '我花很多時間待在家。'}] },
                { word: 'expensive', syllables: ['ex','pen','sive'], phonetics: 'ɪkˋspɛnsɪv', partOfSpeech: 'adj.', definition: '昂貴的', examples: [{en: 'The guitar is too expensive. I don’t have that much money.', zh: '這把吉他太貴了。我沒有這麼多錢。'}] },
                { word: 'on sale', syllables: ['on', 'sale'], phonetics: 'ɑn ˋsel', partOfSpeech: '', definition: '特價中', examples: [{en: 'These notebooks are on sale now.', zh: '這些筆記本現在特價中。'}] },
                { word: 'pair', syllables: ['pair'], phonetics: 'pɛr', partOfSpeech: 'n.', definition: '(一)雙', examples: [{en: 'Evans wants to buy a new pair of running shoes.', zh: '伊凡想買一雙新的跑步鞋。'}] },
                { word: 'total', syllables: ['to','tal'], phonetics: 'ˋtot!', partOfSpeech: 'n.; adj.', definition: '總計(的)', examples: [{en: 'The total number of horses on the farm is 12.', zh: '農場上共有十二匹馬。'}] },
                { word: 'pay', syllables: ['pay'], phonetics: 'pe', partOfSpeech: 'v.; n.', definition: '付費', examples: [{en: 'Can you lend me one hundred dollars? I will pay you back tomorrow.', zh: '你可以借我一百元嗎？我明天還你。'}, {en: 'The pay for the job is not so good.', zh: '這份工作的薪水不是很好。'}] },
                { word: 'thousand', syllables: ['thou','sand'], phonetics: 'ˋθaʊzn̩d', partOfSpeech: 'n.', definition: '千', examples: [{en: 'There are about two thousand students in the school.', zh: '這間學校大約有兩千名學生。'}] },
                { word: 'tomorrow', syllables: ['to','mor','row'], phonetics: 'təˋmɔro', partOfSpeech: 'adv.; n.', definition: '明天', examples: [{en: 'Bella is coming to my house tomorrow.', zh: '貝拉明天要來我家。'}] },
                { word: 'high', syllables: ['high'], phonetics: 'haɪ', partOfSpeech: 'adj.', definition: '高的', examples: [{en: 'What animals live in high mountains?', zh: '有什麼動物住在高山裡？'}] },
                { word: 'save', syllables: ['save'], phonetics: 'sev', partOfSpeech: 'v.', definition: '節省', examples: [{en: 'Let’s not walk there. We can save time by taking the bus.', zh: '我們別用走的過去。我們可以藉由搭公車來節省時間。'}] },
                { word: 'would like', syllables: ['would', 'like'], phonetics: 'wʊd ˋlaɪk', partOfSpeech: '', definition: '想要', examples: [{en: 'I would like to have some cookies with tea.', zh: '我想要幾片餅乾配茶。'}] },
                { word: 'change', syllables: ['change'], phonetics: 'tʃendʒ', partOfSpeech: 'n.', definition: '找零', examples: [{en: 'The total is eight hundred dollars. Here is one thousand dollars. Thanks. And here is your change.', zh: '總共是八百元。這裡是一千元。謝謝。這是您的找零。'}, {en: 'Maggie changed her phone number a few days ago.', zh: '瑪姬幾天前換了她的電話號碼。'}] },
                { word: 'take', syllables: ['take'], phonetics: 'tek', partOfSpeech: 'v.', definition: '花費(時間)', examples: [{en: 'It took me half an hour to clean up the room.', zh: '清理這間房間花了我半小時。'}, {en: 'I took an umbrella with me to school.', zh: '我隨身攜帶了一把雨傘去上學。'}, {en: 'We can take a taxi or a bus, but not the metro.', zh: '我們可以搭計程車或公車,但不能搭地鐵。'}] },
                { word: 'dress', syllables: ['dress'], phonetics: 'drɛs', partOfSpeech: 'v.; n.', definition: '打扮；洋裝', examples: [{en: 'Tina is going to wear that red dress to the party.', zh: '蒂娜將會穿那件紅色洋裝去派對。'}, {en: 'Everyone dressed up for the big party.', zh: '每個人都為了這個盛大的派對盛裝打扮。'}] },
                { word: 'cap', syllables: ['cap'], phonetics: 'kæp', partOfSpeech: 'n.', definition: '帽子', examples: [{en: 'Todd’s baseball cap is black, and mine is blue.', zh: '陶德的棒球帽是黑色的，而我的是藍色的。'}] },
                { word: 'shirt', syllables: ['shirt'], phonetics: 'ʃɝt', partOfSpeech: 'n.', definition: '襯衫', examples: [{en: 'My grandpa wears a white shirt every day.', zh: '我爺爺每天都穿白色的襯衫。'}] },
                { word: 'belt', syllables: ['belt'], phonetics: 'bɛlt', partOfSpeech: 'n.', definition: '腰帶', examples: [{en: 'Where is my belt?', zh: '我的腰帶在哪裡？'}] },
                { word: 'jeans', syllables: ['jeans'], phonetics: 'dʒinz', partOfSpeech: 'n.', definition: '牛仔褲', examples: [{en: 'Theresa seldom wears jeans to work.', zh: '泰瑞莎很少穿牛仔褲去上班。'}] },
                { word: 'sock', syllables: ['sock'], phonetics: 'sɑk', partOfSpeech: 'n.', definition: '襪子', examples: [{en: 'Many students in Japan wear a skirt with long socks to school.', zh: '許多日本學生會穿裙子搭配長襪去學校。'}] },
                { word: 'tie', syllables: ['tie'], phonetics: 'taɪ', partOfSpeech: 'n.', definition: '領帶', examples: [{en: 'Hannah bought her dad a tie for Father’s Day.', zh: '漢娜為了父親節買了一條領帶給她的爸爸。'}] },
                { word: 'pants', syllables: ['pants'], phonetics: 'pænts', partOfSpeech: 'n.', definition: '長褲', examples: [{en: 'John was wearing gray pants and a white shirt at that time.', zh: '約翰那時穿著一條灰色長褲跟一件白襯衫。'}] },
                { word: 'shoe', syllables: ['shoe'], phonetics: 'ʃu', partOfSpeech: 'n.', definition: '鞋', examples: [{en: 'Where did you get this pair of shoes?', zh: '你是在哪裡買到這雙鞋的？'}] },
                { word: 'T-shirt', syllables: ['T-shirt'], phonetics: 'ˋti͵ʃɝt', partOfSpeech: 'n.', definition: 'T恤', examples: [{en: 'I like to wear T-shirts on hot summer days.', zh: '我喜歡在炎炎夏日穿T恤。'}] },
                { word: 'shorts', syllables: ['shorts'], phonetics: 'ʃɔrts', partOfSpeech: 'n.', definition: '短褲', examples: [{en: 'The men’s shorts in the store are on sale now.', zh: '這間店的男用短褲正在特價。'}] },
                { word: 'hat', syllables: ['hat'], phonetics: 'hæt', partOfSpeech: 'n.', definition: '帽子', examples: [{en: 'You need a hat because it is sunny and hot today.', zh: '你需要一頂帽子，因為今天天氣晴朗，而且很熱。'}] },
                { word: 'coat', syllables: ['coat'], phonetics: 'kot', partOfSpeech: 'n.', definition: '外套', examples: [{en: 'Son, put on your coat before you leave. It’s cold now.', zh: '兒子，離開前穿上外套。現在很冷。'}] },
                { word: 'skirt', syllables: ['skirt'], phonetics: 'skɝt', partOfSpeech: 'n.', definition: '裙子', examples: [{en: 'The yellow skirt is too big for you.', zh: '這件黃色裙子對你來說太大了。'}] },
                { word: 'glasses', syllables: ['glass','es'], phonetics: 'ˋglæsɪz', partOfSpeech: 'n.', definition: '眼鏡', examples: [{en: 'You are handsome in your new glasses.', zh: '你戴上新的眼鏡很帥。'}] },
                { word: 'ring', syllables: ['ring'], phonetics: 'rɪŋ', partOfSpeech: 'n.', definition: '戒指', examples: [{en: 'Sherry’s boyfriend gave her a ring for her birthday.', zh: '雪莉的男朋友在她生日送給她一枚戒指。'}] },
                { word: 'take off', syllables: ['take', 'off'], phonetics: '͵tek ˋɔf', partOfSpeech: '', definition: '脫下', examples: [{en: 'Please take off your shoes before you go into the house.', zh: '進屋前請脫鞋。'}] },
                { word: 'fast', syllables: ['fast'], phonetics: 'fæst', partOfSpeech: 'adj.; adv.', definition: '快的；快地', examples: [{en: 'Thomas is a fast swimmer.', zh: '湯瑪士是位速度很快的泳者。'}] },
                { word: 'low', syllables: ['low'], phonetics: 'lo', partOfSpeech: 'adj.', definition: '低的', examples: [{en: 'The water in the river is low in summer.', zh: '在夏天，這條河的水位很低。'}] },
                { word: 'cheap', syllables: ['cheap'], phonetics: 'tʃip', partOfSpeech: 'adj.', definition: '便宜的', examples: [{en: 'The shop sells cheap bags. Let’s take a look.', zh: '這間店的包包很便宜。我們看看吧。'}] },
                { word: 'what\'s more', syllables: ['what\'s', 'more'], phonetics: '(h)wɑts ˋmor', partOfSpeech: '', definition: '而且', examples: [{en: 'Lily is good at dancing. What’s more, her paintings are beautiful.', zh: '莉莉擅長跳舞。而且，她的畫作很美麗。'}] },
                { word: 'most', syllables: ['most'], phonetics: 'most', partOfSpeech: 'adj.', definition: '大部分的', examples: [{en: 'Most people in the country love watching soccer games.', zh: '這個國家大多數人都愛看足球賽。'}] },
                { word: 'hurt', syllables: ['hurt'], phonetics: 'hɝt', partOfSpeech: 'v.', definition: '傷害', examples: [{en: 'I was riding my bike when I hurt my leg.', zh: '當我弄傷腳時，我正在騎單車。'}] },
                { word: 'come off', syllables: ['come', 'off'], phonetics: '͵kʌm ˋɔf', partOfSpeech: '', definition: '脫落', examples: [{en: 'Why is the paint coming off the walls?', zh: '為什麼油漆正在從這些牆上脫落？'}] },
                { word: 'second', syllables: ['sec','ond'], phonetics: 'ˋsɛkənd', partOfSpeech: 'n.', definition: '秒', examples: [{en: 'Can you please give me a second?', zh: '可以請你等我一下嗎？'}, {en: 'Rose is Mr. Bean\'s second daughter.', zh: '蘿絲是豆豆先生的二女兒。'}] },
            ],
            'unit7': [
                { word: 'Halloween', syllables: ['Hal','lo','ween'], phonetics: '͵hæloˋin', partOfSpeech: 'n.', definition: '萬聖夜', examples: [{en: 'There will be a Halloween party at our school next Sunday.', zh: '下週日在我們學校將有萬聖夜派對。'}, {en: 'I want to dress up as Iron Man for Halloween this year.', zh: '今年萬聖夜我想扮成鋼鐵人。'}]},
                { word: 'children', syllables: ['chil','dren'], phonetics: 'ˋtʃɪldrən', partOfSpeech: 'n.', definition: '兒童', examples: [{en: 'Mr. and Mrs. Smith have three children: two boys and a girl.', zh: '史密斯夫婦有三個孩子：兩個男孩和一個女孩。'}]},
                { word: 'pumpkin', syllables: ['pump','kin'], phonetics: 'ˋpʌmpkɪn', partOfSpeech: 'n.', definition: '南瓜', examples: [{en: 'Would you like to have some pumpkin soup for dinner?', zh: '你晚餐想不想來點南瓜湯？'}, {en: 'My mom is good at making pumpkin pies.', zh: '我媽媽很會做南瓜派。'}]},
                { word: 'cut out', syllables: ['cut', 'out'], phonetics: '͵kʌt ˋaʊt', partOfSpeech: '', definition: '割出；切出', examples: [{en: 'Get a pumpkin, and then cut out eyes, a nose, and a mouth.', zh: '拿一個南瓜，接著割出眼睛、鼻子和嘴巴。'}]},
                { word: 'moment', syllables: ['mo','ment'], phonetics: 'ˋmomənt', partOfSpeech: 'n.', definition: '時刻', examples: [{en: 'The boy stopped and thought for a moment before he jumped down the stairs.', zh: '那男孩在跳下階梯前，停下來想了片刻。'}, {en: 'Hold on for a moment, please.', zh: '請稍等一下。'}]},
            ]
        };

        let currentUnit = 'unit1';
        let currentSlide = 0;
        let userData = { id: null, name: null };
        let userAuth = null;
        let isSpeaking = false;
        let slidesData = allUnitsData[currentUnit];
        let currentPuzzle = [];
        let currentPuzzleIndex = 0;
        let currentView = 'flashcard'; 
        
        const { loginModal, leaderboardModal, loginForm, userIdInput, leaderboardBtn, closeLeaderboardBtn, leaderboardContent, flashcardView, puzzleView, slideContentEl, slideCounterEl, prevBtn, nextBtn, slideshowContainer, themeToggle, themeIconDark, themeIconLight, usageStatsEl, unitTabsEl, unitTitleEl, puzzleQuestionCounter, puzzleQuestion, puzzleSlots, puzzlePieces, puzzleFeedback, nextPuzzleBtn, backToFlashcardsBtn } = {
            loginModal: document.getElementById('login-modal'),
            leaderboardModal: document.getElementById('leaderboard-modal'),
            loginForm: document.getElementById('login-form'),
            userIdInput: document.getElementById('user-id'),
            leaderboardBtn: document.getElementById('leaderboard-btn'),
            closeLeaderboardBtn: document.getElementById('close-leaderboard-btn'),
            leaderboardContent: document.getElementById('leaderboard-content'),
            flashcardView: document.getElementById('flashcard-view'),
            puzzleView: document.getElementById('puzzle-view'),
            slideContentEl: document.getElementById('slide-content'),
            slideCounterEl: document.getElementById('slide-counter'),
            prevBtn: document.getElementById('prev-btn'),
            nextBtn: document.getElementById('next-btn'),
            slideshowContainer: document.getElementById('slideshow-container'),
            themeToggle: document.getElementById('theme-toggle'),
            themeIconDark: document.getElementById('theme-icon-dark'),
            themeIconLight: document.getElementById('theme-icon-light'),
            usageStatsEl: document.getElementById('usage-stats'),
            unitTabsEl: document.getElementById('unit-tabs'),
            unitTitleEl: document.getElementById('unit-title'),
            puzzleQuestionCounter: document.getElementById('puzzle-question-counter'),
            puzzleQuestion: document.getElementById('puzzle-question'),
            puzzleSlots: document.getElementById('puzzle-slots'),
            puzzlePieces: document.getElementById('puzzle-pieces'),
            puzzleFeedback: document.getElementById('puzzle-feedback'),
            nextPuzzleBtn: document.getElementById('next-puzzle-btn'),
            backToFlashcardsBtn: document.getElementById('back-to-flashcards-btn'),
        };

        function createTabs() {
            unitTabsEl.innerHTML = '';
            Object.keys(allUnitsData).forEach((unitId) => {
                const tab = document.createElement('button');
                let tabText;
                if (unitId === 'unit7') {
                    tabText = 'C&F';
                } else {
                    tabText = `Unit ${unitId.replace('unit', '')}`;
                }
                tab.textContent = tabText;
                tab.dataset.unit = unitId;
                tab.className = 'unit-tab px-4 py-2 rounded-lg text-sm font-medium transition';
                tab.addEventListener('click', () => switchUnit(unitId));
                unitTabsEl.appendChild(tab);
            });
        }
        
        function switchUnit(unitId) {
            if (unitId === currentUnit && currentView === 'flashcard') return;
            currentUnit = unitId;
            document.body.dataset.unit = currentUnit;
            
            if (userData && userData.progress && !userData.progress[currentUnit]) {
                userData.progress[currentUnit] = { lastWordIndex: 0, usageCount: 0 };
            }

            if(userData && userData.progress && userData.progress[currentUnit]) {
                userData.progress[currentUnit].usageCount++;
            }

            currentSlide = (userData && userData.progress && userData.progress[currentUnit]) ? userData.progress[currentUnit].lastWordIndex : 0;
            
            slidesData = allUnitsData[currentUnit];
            switchView('flashcard');
            renderSlide();
            updateActiveTab();
        }

        function updateActiveTab() {
            const tabs = document.querySelectorAll('.unit-tab');
            tabs.forEach(tab => {
                if (tab.dataset.unit === currentUnit) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
        }
        
        function applyTheme(theme) {
            if (theme === 'dark') {
                document.documentElement.classList.add('dark');
                themeIconLight.classList.remove('hidden');
                themeIconDark.classList.add('hidden');
            } else {
                document.documentElement.classList.remove('dark');
                themeIconDark.classList.remove('hidden');
                themeIconLight.classList.add('hidden');
            }
        }

        function toggleTheme() {
            const newTheme = document.documentElement.classList.contains('dark') ? 'light' : 'dark';
            applyTheme(newTheme);
            localStorage.setItem('theme', newTheme);
        }
        
        function saveProgress() {
            if (userData && userData.id) { 
                localStorage.setItem(`progress_${currentUnit}_${userData.id}`, currentSlide);
                localStorage.setItem(`lastUnit_${userData.id}`, currentUnit);
                updateUsageStats();
            }
        }
        
        function loadProgress() {
            if (userData && userData.id) {
                currentUnit = localStorage.getItem(`lastUnit_${userData.id}`) || 'unit1';
                currentSlide = parseInt(localStorage.getItem(`progress_${currentUnit}_${userData.id}`) || '0');
            }
        }

        function updateUsageStats() {
            // This can be expanded later if needed
        }

        function renderSlide() {
            slidesData = allUnitsData[currentUnit];
            if (!slidesData || slidesData.length === 0) {
                slideContentEl.innerHTML = `<p class="text-center text-muted">本單元沒有單字。</p>`;
                slideCounterEl.textContent = `0 / 0`;
                prevBtn.disabled = true;
                nextBtn.disabled = true;
                return;
            }
            // Ensure currentSlide is within bounds
            if (currentSlide >= slidesData.length) {
                currentSlide = slidesData.length - 1;
            }
            if (currentSlide < 0) {
                currentSlide = 0;
            }

            const slide = slidesData[currentSlide];
            let examplesHtml = (slide.examples || []).map(ex => `
                <li class="mt-2">
                    <p class="text-lg speakable" data-lang="en">${ex.en}</p>
                    <p class="text-md text-muted speakable" data-lang="zh-TW">${ex.zh}</p>
                </li>
            `).join('');

            slideContentEl.innerHTML = `
                <div>
                    <div class="flex items-center mb-1">
                        <h3 class="text-4xl md:text-5xl font-bold text-accent mr-4 capitalize speakable" data-lang="en">
                            ${slide.word}
                        </h3>
                        <button id="speak-btn" class="text-muted hover:text-accent transition">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd" /></svg>
                        </button>
                    </div>
                     <input type="text" id="practice-input" placeholder="請在此輸入單字練習..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                           class="w-full text-4xl md:text-5xl font-bold p-0 m-0 border-b-2 bg-transparent focus:outline-none capitalize" style="height: 60px; border-radius: 0;">
                    <div id="pronunciation-container" class="text-lg text-muted mt-4 mb-6 speakable" data-lang="en">
                        [${slide.phonetics || ''}]
                    </div>
                     <p class="text-xl"><span class="font-semibold speakable" data-lang="en">${slide.partOfSpeech}</span> <span class="speakable" data-lang="zh-TW">${slide.definition}</span></p>
                </div>
                <div class="mt-6 border-t border-default pt-4">
                    <p class="text-md font-semibold text-muted mb-2">例句：</p>
                    <ul class="list-disc list-inside space-y-2">${examplesHtml}</ul>
                </div>
            `;
            document.getElementById('speak-btn').addEventListener('click', () => speakText(document.querySelector('h3.speakable')));
            document.getElementById('practice-input').addEventListener('input', handleTyping);
            slideContentEl.querySelectorAll('.speakable').forEach(el => el.addEventListener('click', (e) => {
                e.stopPropagation();
                speakText(el);
            }));
            updateNav();
            saveProgress();
        }
        
        function updateNav() {
            slidesData = allUnitsData[currentUnit];
            slideCounterEl.textContent = `${currentSlide + 1} / ${slidesData.length}`;
            prevBtn.disabled = currentSlide === 0;
            if (currentSlide === slidesData.length - 1) {
                nextBtn.innerHTML = `<span>開始拼圖挑戰</span>`;
                nextBtn.classList.add('px-4', 'text-sm');
                nextBtn.querySelector('svg')?.classList.add('hidden');
                nextBtn.disabled = false;
            } else {
                 nextBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>`;
                 nextBtn.classList.remove('px-4', 'text-sm');
                 nextBtn.disabled = false;
            }
            if (currentUnit === 'unit7') {
                unitTitleEl.textContent = 'Culture & Festival';
            } else {
                unitTitleEl.textContent = `Unit ${currentUnit.replace('unit', '')}`;
            }
        }

        function showNextSlide() {
            slidesData = allUnitsData[currentUnit];
            if (currentSlide === slidesData.length - 1) {
                initPuzzleMode();
                return;
            }
            nextBtn.classList.remove('button-highlight');
            if (currentSlide < slidesData.length - 1) {
                currentSlide++;
                renderSlide();
            }
        }

        function showPrevSlide() {
            nextBtn.classList.remove('button-highlight');
            if (currentSlide > 0) {
                currentSlide--;
                renderSlide();
            }
        }
        
        function switchView(view) {
            currentView = view;
            if (view === 'flashcard') {
                flashcardView.classList.remove('hidden');
                puzzleView.classList.add('hidden');
            } else {
                flashcardView.classList.add('hidden');
                puzzleView.classList.remove('hidden');
            }
        }

        function speakText(element) {
            if (!element || isSpeaking) return;
            const text = element.textContent;
            const lang = element.dataset.lang || 'en-US';

            if ('speechSynthesis' in window) {
                isSpeaking = true;
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = lang;
                utterance.onend = () => { isSpeaking = false; };
                utterance.onerror = (e) => { 
                    console.error('SpeechSynthesis Error:', e);
                    isSpeaking = false; 
                };
                window.speechSynthesis.speak(utterance);
            }
        }

        async function handleTyping(e) {
            const input = e.target;
            slidesData = allUnitsData[currentUnit];
            const correctWord = slidesData[currentSlide].word.replace(/[\.\s']/g, '').toLowerCase();
            const typedWord = input.value.replace(/[\.\s']/g, '').toLowerCase();

            if (typedWord === correctWord) {
                input.classList.remove('incorrect');
                input.classList.add('correct');
                input.disabled = true;
                await updateUserScore();
                if (!nextBtn.disabled || currentSlide === slidesData.length -1) {
                    nextBtn.classList.add('button-highlight');
                }
            } else if (correctWord.startsWith(typedWord)) {
                 input.classList.remove('incorrect');
                 input.classList.remove('correct');
            } else {
                input.classList.add('incorrect');
                input.classList.remove('correct');
            }
        }
        
        async function updateUserScore(pointsToAdd = 1) {
            if (!db || !userAuth) return;
            const userRef = doc(db, `artifacts/${appId}/public/data/users`, userAuth.uid);
            try {
                await setDoc(userRef, { 
                    score: increment(pointsToAdd),
                    lastUpdated: serverTimestamp()
                }, { merge: true });
            } catch (error) {
                console.error("Error updating score: ", error);
            }
        }

        function initPuzzleMode() {
            switchView('puzzle');
            generatePuzzlesForUnit();
            currentPuzzleIndex = 0;
            renderPuzzle();
        }

        function generatePuzzlesForUnit() {
            const unitWords = [...allUnitsData[currentUnit]];
            currentPuzzle = unitWords.filter(w => !w.word.includes(" ")).sort(() => 0.5 - Math.random()).slice(0, 10);
        }

        function renderPuzzle() {
            if (currentPuzzleIndex >= currentPuzzle.length) {
                puzzleQuestion.textContent = "恭喜完成本單元所有拼圖！";
                puzzleSlots.innerHTML = '';
                puzzlePieces.innerHTML = '';
                puzzleFeedback.innerHTML = '';
                nextPuzzleBtn.classList.add('hidden');
                backToFlashcardsBtn.textContent = "返回主選單";
                return;
            }

            const puzzle = currentPuzzle[currentPuzzleIndex];
            puzzleQuestionCounter.textContent = `第 ${currentPuzzleIndex + 1} / ${currentPuzzle.length} 題`;
            puzzleQuestion.textContent = puzzle.definition;
            puzzleSlots.innerHTML = (puzzle.syllables || []).map(() => `<div class="puzzle-slot border-2 border-dashed border-gray-400 rounded-lg"></div>`).join('');
            puzzlePieces.innerHTML = [...(puzzle.syllables || [])].sort(() => 0.5 - Math.random()).map(part => `
                <div class="puzzle-piece card p-3 rounded-lg shadow-md" draggable="true">${part}</div>
            `).join('');

            puzzleFeedback.textContent = '';
            nextPuzzleBtn.classList.add('hidden');
            setupDragAndDrop();
        }

        function setupDragAndDrop() {
            const pieces = puzzlePieces.querySelectorAll('.puzzle-piece');
            const slots = puzzleSlots.querySelectorAll('.puzzle-slot');
            let draggedPiece = null;

            pieces.forEach(piece => {
                piece.addEventListener('dragstart', (e) => {
                    draggedPiece = e.target;
                    e.dataTransfer.setData('text/plain', e.target.textContent);
                    setTimeout(() => e.target.classList.add('invisible'), 0);
                });
                piece.addEventListener('dragend', (e) => {
                    e.target.classList.remove('invisible');
                });
            });

            slots.forEach(slot => {
                slot.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    slot.classList.add('bg-accent', 'opacity-50');
                });
                slot.addEventListener('dragleave', (e) => {
                    slot.classList.remove('bg-accent', 'opacity-50');
                });
                slot.addEventListener('drop', (e) => {
                    e.preventDefault();
                    slot.classList.remove('bg-accent', 'opacity-50');
                    if (slot.childElementCount > 0) {
                        puzzlePieces.appendChild(slot.firstChild);
                    };
                    if(draggedPiece) {
                        slot.appendChild(draggedPiece);
                        checkPuzzleAnswer();
                    }
                });
            });

            puzzlePieces.addEventListener('dragover', e => e.preventDefault());
            puzzlePieces.addEventListener('drop', e => {
                 if (draggedPiece) puzzlePieces.appendChild(draggedPiece);
            });
        }

        async function checkPuzzleAnswer() {
            const slots = puzzleSlots.querySelectorAll('.puzzle-slot');
            const filledSlots = Array.from(slots).filter(s => s.hasChildNodes());
            
            if (filledSlots.length === (currentPuzzle[currentPuzzleIndex].syllables || []).length) {
                const answer = Array.from(slots).map(s => s.textContent).join('');
                const correctAnswer = currentPuzzle[currentPuzzleIndex].word.replace(/[\s']/g, '');
                
                if (answer === correctAnswer) {
                    puzzleFeedback.textContent = '答對了！';
                    puzzleFeedback.style.color = 'var(--correct-color)';
                    await updateUserScore(5);
                    nextPuzzleBtn.classList.remove('hidden');
                } else {
                    puzzleFeedback.textContent = '不對喔，再試一次！';
                    puzzleFeedback.style.color = 'var(--incorrect-color)';
                }
            }
        }

        async function initUser() {
            if(!db || !auth) {
                 loginModal.classList.add('hidden');
                 mainInit();
                 return;
            }

            onAuthStateChanged(auth, async (user) => {
                if (user) {
                    userAuth = user;
                    const userRef = doc(db, `artifacts/${appId}/public/data/users`, user.uid);
                    let userDoc = await getDoc(userRef);

                    if (!userDoc.exists()) {
                        const newName = localStorage.getItem('engAppUserName') || 'Anonymous-' + user.uid.slice(0, 5);
                        await setDoc(userRef, {
                            name: newName,
                            score: 0,
                            createdAt: serverTimestamp()
                        });
                        userDoc = await getDoc(userRef);
                    }
                    userData = { id: user.uid, ...userDoc.data() };
                    loginModal.classList.add('hidden');
                    mainInit();
                } else {
                    loginModal.classList.remove('hidden');
                    try {
                        if (initialAuthToken) {
                            await signInWithCustomToken(auth, initialAuthToken);
                        } else {
                            await signInAnonymously(auth);
                        }
                    } catch (error) {
                        console.error("Anonymous sign-in failed", error);
                        mainInit();
                    }
                }
            });
        }

        async function showLeaderboard() {
            if (!db) {
                leaderboardContent.innerHTML = '<p>排行榜功能目前無法使用。</p>';
                leaderboardModal.classList.remove('hidden');
                leaderboardModal.classList.add('flex');
                return;
            }
            const usersRef = collection(db, `artifacts/${appId}/public/data/users`);
            const q = query(usersRef, orderBy("score", "desc"), limit(10));

            try {
                const querySnapshot = await getDocs(q);
                let html = '<ol class="space-y-2">';
                let rank = 1;
                querySnapshot.forEach((doc) => {
                    const user = doc.data();
                    const isCurrentUser = userAuth && doc.id === userAuth.uid;
                    html += `
                        <li class="flex justify-between items-center p-2 rounded ${isCurrentUser ? 'bg-accent text-white' : ''}">
                            <span>${rank}. ${user.name}</span>
                            <span>${user.score} 分</span>
                        </li>
                    `;
                    rank++;
                });
                html += '</ol>';
                leaderboardContent.innerHTML = html;
            } catch (error) {
                console.error("Error getting leaderboard: ", error);
                leaderboardContent.innerHTML = '<p>無法載入排行榜。</p>';
            }
            leaderboardModal.classList.remove('hidden');
            leaderboardModal.classList.add('flex');
        }
        
        function mainInit() {
            createTabs();
            applyTheme(localStorage.getItem('theme') || 'light');
            loadProgress();
            document.body.dataset.unit = currentUnit;
            slidesData = allUnitsData[currentUnit];
            renderSlide();
            updateActiveTab();
            setupEventListeners();
        }

        function setupEventListeners() {
            prevBtn.addEventListener('click', showPrevSlide);
            nextBtn.addEventListener('click', showNextSlide);
            themeToggle.addEventListener('click', toggleTheme);
            leaderboardBtn.addEventListener('click', showLeaderboard);
            closeLeaderboardBtn.addEventListener('click', () => {
                leaderboardModal.classList.add('hidden');
                leaderboardModal.classList.remove('flex');
            });
            nextPuzzleBtn.addEventListener('click', () => {
                currentPuzzleIndex++;
                renderPuzzle();
            });
            backToFlashcardsBtn.addEventListener('click', () => {
                switchUnit(currentUnit);
            });
            
            loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const userId = userIdInput.value.trim();
                if (userId && userAuth) {
                    const userRef = doc(db, `artifacts/${appId}/public/data/users`, userAuth.uid);
                    setDoc(userRef, { name: userId }, { merge: true });
                    localStorage.setItem('engAppUserName', userId);
                    loginModal.classList.add('hidden');
                    if(userData) userData.name = userId;
                }
            });

             document.addEventListener('keydown', (e) => {
                if(currentView !== 'flashcard') return;
                const practiceInput = document.getElementById('practice-input');
                if (document.activeElement === practiceInput || !loginModal.classList.contains('hidden')) return;
                if (e.key === 'ArrowRight') showNextSlide();
                else if (e.key === 'ArrowLeft') showPrevSlide();
            });

            let touchstartX = 0;
            slideshowContainer.addEventListener('touchstart', e => { touchstartX = e.changedTouches[0].screenX; });
            slideshowContainer.addEventListener('touchend', e => {
                if (currentView !== 'flashcard') return;
                const touchendX = e.changedTouches[0].screenX;
                if (touchendX < touchstartX - 50) showNextSlide();
                if (touchendX > touchstartX + 50) showPrevSlide();
            });
        }
        
        document.addEventListener('DOMContentLoaded', initUser);
    </script>
</body>
</html>

